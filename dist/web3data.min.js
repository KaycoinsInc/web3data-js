!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).web3data=t()}(this,(function(){"use strict";var e=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},t=Object.prototype.toString;
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function n(e){return"[object Array]"===t.call(e)}function r(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===t.call(e)}function o(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var i={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===t.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:r,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===t.call(e)},isFile:function(e){return"[object File]"===t.call(e)},isBlob:function(e){return"[object Blob]"===t.call(e)},isFunction:s,isStream:function(e){return r(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:o,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,s=arguments.length;r<s;r++)o(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,s=arguments.length;r<s;r++)o(arguments[r],n);return t},extend:function(t,n,r){return o(n,(function(n,s){t[s]=r&&"function"==typeof n?e(n,r):n})),t},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var c=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(i.isURLSearchParams(t))r=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))})))})),r=s.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function d(){this.handlers=[]}d.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},d.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},d.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var u=d,h=function(e,t,n){return i.forEach(n,(function(n){e=n(e,t)})),e},l=function(e){return!(!e||!e.__CANCEL__)},p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var g=f,E=b;function m(e){if(g===setTimeout)return setTimeout(e,0);if((g===f||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}"function"==typeof p.setTimeout&&(g=setTimeout),"function"==typeof p.clearTimeout&&(E=clearTimeout);var w,_=[],O=!1,T=-1;function N(){O&&w&&(O=!1,w.length?_=w.concat(_):T=-1,_.length&&S())}function S(){if(!O){var e=m(N);O=!0;for(var t=_.length;t;){for(w=_,_=[];++T<t;)w&&w[T].run();T=-1,t=_.length}w=null,O=!1,function(e){if(E===clearTimeout)return clearTimeout(e);if((E===b||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(e);try{E(e)}catch(t){try{return E.call(null,e)}catch(t){return E.call(this,e)}}}(e)}}function A(e,t){this.fun=e,this.array=t}A.prototype.run=function(){this.fun.apply(null,this.array)};function R(){}var y=R,v=R,k=R,I=R,C=R,D=R,B=R;var H=p.performance||{},P=H.now||H.mozNow||H.msNow||H.oNow||H.webkitNow||function(){return(new Date).getTime()};var M=new Date;var L={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];_.push(new A(e,t)),1!==_.length||O||m(S)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:y,addListener:v,once:k,off:I,removeListener:C,removeAllListeners:D,emit:B,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*P.call(H),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M)/1e3}},U=function(e,t){i.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},x=function(e,t,n,r,s){return function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,s)},K=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],j=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},F=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},G=function(e){return new Promise((function(t,n){var r=e.data,s=e.headers;i.isFormData(r)&&delete s["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",d=e.auth.password||"";s.Authorization="Basic "+btoa(a+":"+d)}if(o.open(e.method.toUpperCase(),c(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(e){var t,n,r,s={};return e?(i.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=i.trim(e.substr(0,r)).toLowerCase(),n=i.trim(e.substr(r+1)),t){if(s[t]&&K.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}(o.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(x("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,s),o=null}},o.onabort=function(){o&&(n(x("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(x("Network Error",e,null,o)),o=null},o.ontimeout=function(){n(x("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},i.isStandardBrowserEnv()){var u=F,h=(e.withCredentials||j(e.url))&&e.xsrfCookieName?u.read(e.xsrfCookieName):void 0;h&&(s[e.xsrfHeaderName]=h)}if("setRequestHeader"in o&&i.forEach(s,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete s[t]:o.setRequestHeader(t,e)})),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},$={"Content-Type":"application/x-www-form-urlencoded"};function q(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var W,z={adapter:(void 0!==L&&"[object process]"===Object.prototype.toString.call(L)?W=G:"undefined"!=typeof XMLHttpRequest&&(W=G),W),transformRequest:[function(e,t){return U(t,"Accept"),U(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(q(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(q(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};z.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){z.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){z.headers[e]=i.merge($)}));var V=z;function J(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var X=function(e){var t,n,r;return J(e),e.baseURL&&(r=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(r))&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=h(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||V.adapter)(e).then((function(t){return J(e),t.data=h(t.data,t.headers,e.transformResponse),t}),(function(t){return l(t)||(J(e),t&&t.response&&(t.response.data=h(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Y=function(e,t){t=t||{};var n={};return i.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),i.forEach(["headers","auth","proxy"],(function(r){i.isObject(t[r])?n[r]=i.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:i.isObject(e[r])?n[r]=i.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),i.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function Q(e){this.defaults=e,this.interceptors={request:new u,response:new u}}Q.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Y(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[X,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Q.prototype.getUri=function(e){return e=Y(this.defaults,e),c(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){Q.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){Q.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}));var Z=Q;function ee(e){this.message=e}ee.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ee.prototype.__CANCEL__=!0;var te=ee;function ne(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new te(e),t(n.reason))}))}ne.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ne.source=function(){var e;return{token:new ne((function(t){e=t})),cancel:e}};var re=ne;function se(t){var n=new Z(t),r=e(Z.prototype.request,n);return i.extend(r,Z.prototype,n),i.extend(r,n),r}var oe=se(V);oe.Axios=Z,oe.create=function(e){return se(Y(oe.defaults,e))},oe.Cancel=te,oe.CancelToken=re,oe.isCancel=l,oe.all=function(e){return Promise.all(e)},oe.spread=function(e){return function(t){return e.apply(null,t)}};var ie=oe,ae=oe;ie.default=ae;var ce=ie,de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports.DEFAULT_WEBSOCKET_URL="wss://ws.web3api.io",e.exports.DEFAULT_BASE_URL="https://web3api.io/api/v2",e.exports.DEFAULT_RPC_URL="https://rpc.web3api.io",e.exports.API_KEY_HEADER="x-api-key",e.exports.BLOCKCHAIN_ID_HEADER="x-amberdata-blockchain-id",e.exports.BLOCKCHAIN_ID_ETHEREUM_MAINNET="1c9c969065fcd1cf",e.exports.BLOCKCHAIN_ID_ETHEREUM_RINKEBY="1b3f7a72b3e99c13",e.exports.BLOCKCHAIN_ID_BITCOIN="408fa195a34b533de9ad9889f076045e",e.exports.BLOCKCHAIN_ID_BITCOIN_CASH="43b45e71cc0615b491cb699e7071fc06",e.exports.BLOCKCHAIN_ID_BITCOIN_SV="a818635d36dbe125e26167c4438e2217",e.exports.BLOCKCHAIN_ID_LITECOIN="f94be61fd9f4fa684f992ddfd4e92272",e.exports.BLOCKCHAIN_ID_RIPPLE="2b8a5d8975e8c2a2ed92450450979a3c",e.exports.BLOCKCHAIN_ID_ZCASH="b7d4f994f33c709be4ce6cbae31d7b8e",e.exports.ADDRESSES_ENDPOINT="/addresses",e.exports.TOKENS_ENDPOINT="/tokens",e.exports.TRANSACTIONS_ENDPOINT="/transactions",e.exports.BLOCKS_ENDPOINT="/blocks",e.exports.CONTRACTS_ENDPOINT="/contracts",e.exports.SIGNATURES_ENDPOINT="/signatures",e.exports.MARKET_ENDPOINT="/market",e.exports.MARKET_FEATURES=["pairs","exchanges","ohlcv","prices","tickers"],e.exports.ERROR_MESSAGE_TOKEN_NO_ADDRESS="No token address supplied",e.exports.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS="No token holder address supplied",e.exports.ERROR_MESSAGE_TRANSACTION_NO_HASH="No transaction hash supplied",e.exports.ERROR_MESSAGE_ADDRESS_NO_ADDRESS="No address supplied",e.exports.ERROR_MESSAGE_CONTRACT_NO_ADDRESS="No contract address supplied",e.exports.ERROR_MESSAGE_BLOCK_NO_ID="No block number or hash supplied",e.exports.ERROR_MESSAGE_MARKET_NO_PAIR="No market pair supplied",e.exports.ERROR_MESSAGE_MARKET_NO_FEATURE=`Missing or unknown. Features: '${e.exports.MARKET_FEATURES.join("', '")}'`,e.exports.ERROR_MESSAGE_SIGNATURE_NO_HASH="No signature hash supplied",e.exports.ERROR_RPC_NO_METHOD="No RPC method provided",e.exports.ETH_METHODS={getBlockNumber:"block",getBlock:"block",getBlockTransactionCount:"block",getUncle:"block",getCode:"contract",getGasPrice:"transaction",getTransactionFromBlock:"block",getTransactions:"block",getTransaction:"transaction",getPendingTransactions:"transaction",getEtherPrice:"market"},e.exports.BTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getLatestBalance","getHistoricalBalance","getMultipleBalances","getBalancesBatch","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions"]},e.exports.LTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getLatestBalance","getHistoricalBalance","getMultipleBalances","getBalancesBatch","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions"]},e.exports.HTTP_CODE_NOT_FOUND=404})),he=(ue.DEFAULT_WEBSOCKET_URL,ue.DEFAULT_BASE_URL,ue.DEFAULT_RPC_URL,ue.API_KEY_HEADER,ue.BLOCKCHAIN_ID_HEADER,ue.BLOCKCHAIN_ID_ETHEREUM_MAINNET,ue.BLOCKCHAIN_ID_ETHEREUM_RINKEBY,ue.BLOCKCHAIN_ID_BITCOIN,ue.BLOCKCHAIN_ID_BITCOIN_CASH,ue.BLOCKCHAIN_ID_BITCOIN_SV,ue.BLOCKCHAIN_ID_LITECOIN,ue.BLOCKCHAIN_ID_RIPPLE,ue.BLOCKCHAIN_ID_ZCASH,ue.ADDRESSES_ENDPOINT,ue.TOKENS_ENDPOINT,ue.TRANSACTIONS_ENDPOINT,ue.BLOCKS_ENDPOINT,ue.CONTRACTS_ENDPOINT,ue.SIGNATURES_ENDPOINT,ue.MARKET_ENDPOINT,ue.MARKET_FEATURES,ue.ERROR_MESSAGE_TOKEN_NO_ADDRESS,ue.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS,ue.ERROR_MESSAGE_TRANSACTION_NO_HASH,ue.ERROR_MESSAGE_ADDRESS_NO_ADDRESS,ue.ERROR_MESSAGE_CONTRACT_NO_ADDRESS,ue.ERROR_MESSAGE_BLOCK_NO_ID,ue.ERROR_MESSAGE_MARKET_NO_PAIR,ue.ERROR_MESSAGE_MARKET_NO_FEATURE,ue.ERROR_MESSAGE_SIGNATURE_NO_HASH,ue.ERROR_RPC_NO_METHOD,ue.ETH_METHODS,ue.BTC_METHODS,ue.LTC_METHODS,ue.HTTP_CODE_NOT_FOUND,[]),le=0;le<256;++le)he[le]=(le+256).toString(16).substr(1);var pe=function(e,t){var n=t||0,r=he;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};function fe(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function be(e,t){return e<<t|e>>>32-t}var ge=function(e,t,n){var r=function(e,r,s,o){var i=s&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof r&&(r=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(r)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=n(r.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,s)for(var c=0;c<16;++c)s[i+c]=a[c];return s||pe(a)};try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var s=0;s<r.length;s++)e[s]=r.charCodeAt(s)}e.push(128);var o=e.length/4+2,i=Math.ceil(o/16),a=new Array(i);for(s=0;s<i;s++){a[s]=new Array(16);for(var c=0;c<16;c++)a[s][c]=e[64*s+4*c]<<24|e[64*s+4*c+1]<<16|e[64*s+4*c+2]<<8|e[64*s+4*c+3]}for(a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295,s=0;s<i;s++){for(var d=new Array(80),u=0;u<16;u++)d[u]=a[s][u];for(u=16;u<80;u++)d[u]=be(d[u-3]^d[u-8]^d[u-14]^d[u-16],1);var h=n[0],l=n[1],p=n[2],f=n[3],b=n[4];for(u=0;u<80;u++){var g=Math.floor(u/20),E=be(h,5)+fe(g,l,p,f)+b+t[g]+d[u]>>>0;b=f,f=p,p=be(l,30)>>>0,l=h,h=E}n[0]=n[0]+h>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+f>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const{ETH_METHODS:Ee}=ue,me=e=>{let t="";for(const n in e)({}).hasOwnProperty.call(e,n)&&(t+=`${n}=${e[n]}&`);return t},we=(e,t)=>{if(e)throw new Error(t)},_e=e=>we(!0,e),Oe=()=>{};Oe.string=e=>"string"==typeof e,Oe.bool=e=>"boolean"==typeof e,Oe.emptyString=e=>Oe.string(e)&&0===e.length,Oe.emptyObject=e=>0===Object.keys(e).length,Oe.inObject=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Oe.undefined=e=>void 0===e,Oe.null=e=>null===e,Oe.notHash=e=>Oe.undefined(e)||Oe.emptyString(e),Oe.notUndefined=e=>!Oe.undefined(e),Oe.nonEmptyObject=e=>!Oe.emptyObject(e),Oe.nonEmptyString=e=>!Oe.emptyString(e),Oe.notInObject=(e,t)=>!Oe.inObject(e,t);const Te=e=>Object.getOwnPropertyNames(e).filter(t=>"function"==typeof e[t]&&"constructor"!==t);var Ne={buildFilterUrl:me,is:Oe,throwIf:we,get:(e,{endpoint:t="",subendpoint:n="",hash:r="",pathParam:s="",filterOptions:o={}})=>{const i=Oe.nonEmptyObject(o)?"?"+me(o):"";return r=r?"/"+r:"",s=s?"/"+s:"",n=n?"/"+n:"",e.rawQuery(`${t}${r||s}${n}${i}`)},rejectPromiseIf:(e,t)=>{if(e)return Promise.reject(new Error(t))},uuid:e=>ge(JSON.stringify(e),"ccfeca02-f0e9-4433-a740-b830cceb3d2d"),ethFactory:function(e){const t={};for(const n in Ee)({}).hasOwnProperty.call(Ee,n)&&(t[n]=e[Ee[n]][n].bind(e[Ee[n]]));return t},methodFactory:(e,t)=>(Object.keys(t).forEach(n=>{Te(Object.getPrototypeOf(e.web3data[n])).forEach(r=>{t[n].includes(r)&&(e[n]=e[n]?e[n]:{},e[n][r]=e.web3data[n][r].bind(e))})}),e),throwNow:_e,onFulfilled:function(e){return we(e.error,e.message),this&&this.formatter?this.formatter(e.payload):e.payload},onError:({response:{data:e}})=>_e(e.message||e.description),formatJsonRpc:e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",getMethods:Te,recordsFormatter:e=>((e,t)=>e[t]?e[t]:null)(e,"records")};const{ERROR_MESSAGE_ADDRESS_NO_ADDRESS:Se,ADDRESSES_ENDPOINT:Ae}=ue,{is:Re,get:ye,throwIf:ve,onFulfilled:ke,onError:Ie}=Ne;var Ce=class{constructor(e){this.web3data=e}getAllAddresses(e={}){return ye(this.web3data,{endpoint:Ae,filterOptions:e}).then(ke,Ie)}getInformation(e,t){return Re.notHash(e)?Promise.reject(new Error(Se)):ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"information",filterOptions:t}).then(ke,Ie)}getMetadata(e,t){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"metadata",filterOptions:t}).then(ke,Ie)}getAdoption(e,t){return Re.notHash(e)?Promise.reject(new Error(Se)):ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"adoption",filterOptions:t}).then(ke,Ie)}getInternalMessages(e,t={}){return this.web3data.address.getFunctions(e,t)}getFunctions(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"functions",filterOptions:t}).then(ke,Ie)}getLogs(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"logs",filterOptions:t}).then(ke,Ie)}getTransactions(e,t={}){return ve(!e,Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"transactions",filterOptions:t}).then(ke,Ie)}getPendingTransactions(e,t={}){return ve(!e,Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"pending-transactions",filterOptions:t}).then(ke,Ie)}getBalance(e,t={}){return ve(Re.notHash(e),Se),t.startDate||t.endDate?this.web3data.address.getHistoricalBalance(e,t).then(e=>e):this.web3data.address.getLatestBalance(e,t).then(e=>e)}getLatestBalance(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"account-balances/latest",filterOptions:t}).then(ke,Ie)}getHistoricalBalance(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"account-balances/historical",filterOptions:t}).then(ke,Ie)}getMultipleBalances(e,t={}){return Array.isArray(e)?this.web3data.address.getBalancesBatch(e,t):this.web3data.address.getBalances(e,t)}getBalances(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"balances",filterOptions:t}).then(ke,Ie)}getBalancesBatch(e,t={}){return ve(!Array.isArray(e),"Must be array of valid address hashes"),e.forEach(e=>ve(Re.notHash(e),Se)),t.addresses=e,ye(this.web3data,{endpoint:Ae,subendpoint:"balances",filterOptions:t}).then(ke,Ie)}getTokens(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"tokens",filterOptions:t}).then(ke,Ie)}getTokenTransfers(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"token-transfers",filterOptions:t}).then(ke,Ie)}getTokenBalances(e,t){return Re.notHash(e)?Promise.reject(new Error(Se)):ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"token-balances",filterOptions:t}).then(ke,Ie)}getUsage(e,t){return Re.notHash(e)?Promise.reject(new Error(Se)):ye(this.web3data,{hash:e,endpoint:Ae,subendpoint:"usage",filterOptions:t}).then(ke,Ie)}getMetrics(e){return ye(this.web3data,{endpoint:Ae,subendpoint:"metrics/latest",filterOptions:e}).then(ke,Ie)}};const{is:De,get:Be,onFulfilled:He,onError:Pe}=Ne,{ERROR_MESSAGE_TOKEN_NO_ADDRESS:Me,ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS:Le,TOKENS_ENDPOINT:Ue}=ue;var xe=class{constructor(e){this.web3data=e}getRankings(e){return Be(this.web3data,{endpoint:Ue,subendpoint:"rankings",filterOptions:e}).then(He,Pe)}getVolume(e,t){return De.notHash(e)?Promise.reject(new Error(Me)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"volume",filterOptions:t}).then(He,Pe)}getVelocity(e,t){return De.notHash(e)?Promise.reject(new Error(Me)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"velocity",filterOptions:t}).then(He,Pe)}getHolders(e,t){return De.notHash(e)?Promise.reject(new Error(Me)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"holders/latest",filterOptions:t}).then(He,Pe)}getHoldersHistorical(e,t={}){return De.notHash(e)?Promise.reject(new Error(Me)):De.notInObject(t,"holderAddresses")?Promise.reject(new Error(Le)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"holders/historical",filterOptions:t}).then(He,Pe)}getSupplies(e,t){return De.notHash(e)?Promise.reject(new Error(Me)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"supplies/latest",filterOptions:t}).then(He,Pe)}getTransfers(e,t){return De.notHash(e)?Promise.reject(new Error(Me)):Be(this.web3data,{hash:e,endpoint:Ue,subendpoint:"transfers",filterOptions:t}).then(He,Pe)}};const{ERROR_MESSAGE_CONTRACT_NO_ADDRESS:Ke,CONTRACTS_ENDPOINT:je}=ue,{is:Fe,get:Ge,throwIf:$e,onFulfilled:qe,onError:We}=Ne;var ze=class{constructor(e){this.web3data=e}getDetails(e){return $e(Fe.notHash(e),Ke),Ge(this.web3data,{pathParam:e,endpoint:je}).then(qe,We)}getFunctions(e,t){return Fe.notHash(e)?Promise.reject(new Error(Ke)):Ge(this.web3data,{pathParam:e,endpoint:je,subendpoint:"functions",filterOptions:t})}getAudit(e,t){return Fe.notHash(e)?Promise.reject(new Error(Ke)):Ge(this.web3data,{pathParam:e,endpoint:je,subendpoint:"audit",filterOptions:t})}getAbi(e){return $e(Fe.notHash(e),Ke),this.getDetails(e).then(({abi:e})=>e)}getSourceCode(e){return $e(Fe.notHash(e),Ke),Ge(this.web3data,{pathParam:e,endpoint:je,subendpoint:"source-code"}).then(qe,We)}getCode(e){return this.getDetails(e).then(e=>e.bytecode||"0x")}};const{TRANSACTIONS_ENDPOINT:Ve,ERROR_MESSAGE_TRANSACTION_NO_HASH:Je}=ue,{is:Xe,get:Ye,onFulfilled:Qe,onError:Ze,throwIf:et,recordsFormatter:tt}=Ne;var nt=class{constructor(e){this.web3data=e}getTransactions(e){return Ye(this.web3data,{endpoint:Ve,filterOptions:e}).then(Qe.bind({formatter:tt}),Ze)}getTransaction(e,t){return et(Xe.notHash(e),Je),Ye(this.web3data,{pathParam:e,endpoint:Ve,filterOptions:t}).then(Qe,Ze)}getPendingTransactions(){return this.getTransactions({status:"pending"}).then(e=>(et(Xe.undefined(e)||Xe.null(e),"Failed to retrieve pending transactions."),e),console.error)}getGasPrediction(){return Ye(this.web3data,{endpoint:Ve,subendpoint:"gas/predictions"}).then(Qe,Ze)}getGasPercentiles(e){return Ye(this.web3data,{endpoint:Ve,subendpoint:"gas/percentiles",filterOptions:e}).then(Qe,Ze)}getGasPrice(){return this.getGasPrediction().then(e=>(et(!e.average||!e.average.gasPrice,"Failed to retrieve gas price."),`${e.average.gasPrice}`))}getVolume(e){return Ye(this.web3data,{endpoint:Ve,subendpoint:"volume",filterOptions:e}).then(Qe,Ze)}getMetrics(e){return Ye(this.web3data,{endpoint:Ve,subendpoint:"metrics/latest",filterOptions:e}).then(Qe,Ze)}};const{BLOCKS_ENDPOINT:rt,ERROR_MESSAGE_BLOCK_NO_ID:st}=ue,{is:ot,get:it,throwIf:at,onFulfilled:ct,onError:dt,recordsFormatter:ut}=Ne;var ht=class{constructor(e){this.web3data=e}getBlocks(e){return it(this.web3data,{endpoint:rt,filterOptions:e}).then(ct.bind({formatter:ut}),dt)}getBlock(e,t){return at(ot.undefined(e),st),it(this.web3data,{pathParam:e,endpoint:rt,filterOptions:t}).then(ct,dt)}getBlockNumber(){return this.web3data.block.getBlock("latest").then(e=>(at(e|!e.number,"Failed to retrieve block number."),parseInt(e.number,10)))}getBlockTransactionCount(e){return this.web3data.block.getBlock(e).then(e=>(at(!e||!e.predictions&&!e.numTransactions,"Failed to retrieve block transaction count."),e.predictions?null:parseInt(e.numTransactions,10)))}getTransactions(e,t){return at(ot.undefined(e),st),it(this.web3data,{pathParam:e,endpoint:rt,subendpoint:"transactions",filterOptions:t}).then(ct.bind({formatter:ut}),dt)}getTransactionFromBlock(e,t){return at(ot.undefined(e),st),this.web3data.block.getTransactions(e).then(e=>(at(!e,"Failed to retrieve transaction."),t<e.length&&t>-1?e[t]:null))}getUncle(e,t){return at(ot.undefined(e),st),at(ot.undefined(t),"Missing required param 'index'"),this.web3data.block.getBlock(e,{validationMethod:"full"}).then(e=>(at(!e||!e.predictions&&!e.numTransactions&&!e.validation,"Failed to retrieve uncle."),!e.predictions&&e.validation.uncles&&t<e.validation.uncles.length&&t>-1?e.validation.uncles[t]:null))}getTokenTransfers(e,t){return at(ot.undefined(e),st),it(this.web3data,{pathParam:e,endpoint:rt,subendpoint:"token-transfers",filterOptions:t}).then(ct,dt)}getLogs(e,t){return at(ot.undefined(e),st),it(this.web3data,{pathParam:e,endpoint:rt,subendpoint:"logs",filterOptions:t}).then(ct.bind({formatter:ut}),dt)}getFunctions(e,t){return at(ot.undefined(e),st),it(this.web3data,{pathParam:e,endpoint:rt,subendpoint:"functions",filterOptions:t}).then(ct.bind({formatter:ut}),dt)}getMetrics(e){return it(this.web3data,{endpoint:rt,subendpoint:"metrics/latest",filterOptions:e}).then(ct,dt)}};const{get:lt,is:pt}=Ne,{SIGNATURES_ENDPOINT:ft,ERROR_MESSAGE_SIGNATURE_NO_HASH:bt}=ue;var gt=class{constructor(e){this.web3data=e}get4Byte(e){return pt.notHash(e)?Promise.reject(new Error(bt)):lt(this.web3data,{hash:e,endpoint:ft})}};const{is:Et,get:mt,throwIf:wt,onFulfilled:_t,onError:Ot}=Ne,{MARKET_FEATURES:Tt,MARKET_ENDPOINT:Nt,ERROR_MESSAGE_MARKET_NO_PAIR:St,ERROR_MESSAGE_MARKET_NO_FEATURE:At}=ue;var Rt=class{constructor(e){this.web3data=e}async getEtherPrice(){return mt(this.web3data,{endpoint:Nt+"/prices/eth/latest"}).then(e=>e.payload.eth_usd.price,Ot)}getRankings(e){return mt(this.web3data,{endpoint:Nt,subendpoint:"rankings",filterOptions:e}).then(_t,Ot)}getFeatures(e=Tt,t={}){return e=(e=Array.isArray(e)?e:[e]).map(e=>{switch(wt(Et.undefined(e)||!Tt.includes(e),At),e){case"prices":e+="/pairs";break;case"ohlcv":case"tickers":e+="/information"}return mt(this.web3data,{endpoint:Nt,subendpoint:e,filterOptions:t}).then(_t,Ot).then(t=>({[e.split("/")[0]]:t}))}),Promise.all([...e]).then(e=>e.reduce((e,t)=>({...e,...t})))}getOhlcv(e,t={}){wt(Et.undefined(e),St);const n=t.startDate||t.endDate?"historical":"latest";return mt(this.web3data,{pathParam:e,endpoint:`${Nt}/ohlcv`,subendpoint:n,filterOptions:t}).then(_t,Ot)}getOrders(e,t,n={}){return wt(Et.undefined(e),St),(t=Array.isArray(t)?t:[t]).forEach(e=>wt(Et.undefined(e),"No exchange specified")),n.exchange=t,mt(this.web3data,{pathParam:e,endpoint:`${Nt}/orders`,filterOptions:n}).then(_t,Ot)}getOrderBooks(e,t={}){return wt(Et.undefined(e),St),mt(this.web3data,{pathParam:e,endpoint:`${Nt}/orders`,subendpoint:"update",filterOptions:t}).then(_t,Ot)}getBbos(e,t={}){wt(Et.undefined(e),St);const n=t.startDate||t.endDate?"bbo/historical":"bbo";return mt(this.web3data,{pathParam:e,endpoint:`${Nt}/orders`,subendpoint:n,filterOptions:t}).then(_t,Ot)}getPrices(e,t={}){wt(Et.undefined(e),St);const n=t.startDate||t.endDate?"historical":"latest";return mt(this.web3data,{pathParam:e,endpoint:`${Nt}/prices`,subendpoint:n,filterOptions:t}).then(_t,Ot)}getTokenPrices(e,t={}){wt(Et.notHash(e),St);const n=t.startDate||t.endDate?"historical":"latest";return mt(this.web3data,{hash:e,endpoint:`${Nt}/tokens/prices`,subendpoint:n,filterOptions:t}).then(_t,Ot)}getVwap(e,t={}){return wt(Et.undefined(e),St),mt(this.web3data,{pathParam:e,endpoint:`${Nt}/prices`,subendpoint:"wap/latest",filterOptions:t}).then(_t,Ot)}getTickers(e,t={}){wt(Et.undefined(e),St);const n=t.startDate||t.endDate?"historical":"latest";return mt(this.web3data,{pathParam:e,endpoint:`${Nt}/tickers`,subendpoint:n,filterOptions:t}).then(_t,Ot)}getTrades(e,t={}){return wt(Et.undefined(e),St),mt(this.web3data,{pathParam:e,endpoint:`${Nt}/trades`,subendpoint:"historical",filterOptions:t}).then(_t,Ot)}getAssetAddresses(e="all"){return mt(this.web3data,{endpoint:`${Nt}/pairs/addresses`,filterOptions:{symbols:e}}).then(_t,Ot)}};const{throwIf:yt,ethFactory:vt}=Ne,{BLOCKCHAIN_ID_ETHEREUM_MAINNET:kt}=ue;var It=class{constructor(e,t,n){n.blockchainId=kt,this.web3data=new e(t,n);const r=vt(this.web3data);for(const e in r)({}).hasOwnProperty.call(r,e)&&(this[e]=r[e])}async getBalance(e){let t;try{t=await this.web3data.address.getBalance(e)}catch(e){yt(!0,e.message)}return t&&t.value?t.value:null}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN:Ct,BTC_METHODS:Dt}=ue,{methodFactory:Bt}=Ne;var Ht=class{constructor(e,t,n){n.blockchainId=Ct,this.web3data=new e(t,n),Bt(this,Dt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_CASH:Pt,BTC_METHODS:Mt}=ue,{methodFactory:Lt}=Ne;var Ut=class{constructor(e,t,n){n.blockchainId=Pt,this.web3data=new e(t,n),Lt(this,Mt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_SV:xt,BTC_METHODS:Kt}=ue,{methodFactory:jt}=Ne;var Ft=class{constructor(e,t,n){n.blockchainId=xt,this.web3data=new e(t,n),jt(this,Kt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_LITECOIN:Gt,LTC_METHODS:$t}=ue,{methodFactory:qt}=Ne;var Wt=class{constructor(e,t,n){n.blockchainId=Gt,this.web3data=new e(t,n),qt(this,$t)}rpc(e,t){return this.web3data.rpc(e,t)}},zt=null;"undefined"!=typeof WebSocket?zt=WebSocket:"undefined"!=typeof MozWebSocket?zt=MozWebSocket:void 0!==de?zt=de.WebSocket||de.MozWebSocket:"undefined"!=typeof window?zt=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(zt=self.WebSocket||self.MozWebSocket);var Vt=zt;const{DEFAULT_WEBSOCKET_URL:Jt}=ue,{is:Xt,uuid:Yt}=Ne,Qt=e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",Zt={SUB_ACK:0,DATA:1,UNSUB_ACK:2},en=e=>e.params?Zt.DATA:Xt.string(e.result)?Zt.SUB_ACK:Xt.bool(e.result)?Zt.UNSUB_ACK:void 0,tn=3,nn=18e5,rn=5e3;var sn=class{constructor(e,t){return this.socket=null,this.baseWsUrl=t&&t.websocketUrl?t.websocketUrl:Jt,this.apiKey=e,this.blockchainId=null,this.connected=!1,this.reconnects=0,this.responseReceived=!1,this.dataReceived=!1,t.blockchainId&&(this.blockchainId=t.blockchainId),this.registry={},this.registrySubIds={},this.latestState={},this}connect(e){if(this.socket&&1===this.socket.readyState)return;const t=this.apiKey?`?x-api-key=${this.apiKey}`:"",n=this.blockchainId?`&x-amberdata-blockchain-id=${this.blockchainId}`:"";this.socket=new Vt(`${this.baseWsUrl}${t}${n}`),this.socket.addEventListener("open",t=>{console.info("websocket client connection opened"),this.connected=!0,this._refreshSubscriptions(),this._listen(),e&&e(t),setTimeout(()=>{!this.responseReceived&&Xt.nonEmptyObject(this.registry)&&this.socket&&this.socket.close()},rn),setTimeout(()=>{!this.dataReceived&&Xt.nonEmptyObject(this.registry)&&this.socket.close()},nn)}),this.socket.addEventListener("error",t=>{e&&t?e("connection error occurred",t):console.error("connection error occurred"),this._reconnect()}),this.socket.addEventListener("close",e=>{console.info("Websocket client connection closed - code",e.code),this._reconnect()})}disconnect(e=null){this.socket&&1===this.socket.readyState?(this.socket.onclose=e?()=>e("Websocket client connection closed"):()=>console.info("Websocket client connection closed"),this.socket.close(),this.socket=null):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=Yt({eventName:e,filters:t});this.connected&&this._subscribe(e,t),this.registry[r]={},this.registry[r].callback=n,this.registry[r].args={eventName:e,filters:t}}once({eventName:e,filters:t},n){this.on({eventName:e,filters:t},r=>{this.off({eventName:e,filters:t},()=>{}),n&&n(r),this.registry[Yt({eventName:e,filters:t})].callback=null})}off({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=Yt({eventName:e,filters:t});this.registry[r]&&this.registry[r].subId?(this._unsubscribe(e,t,r),this.registry[r].unsubCallback=n):console.error(`Not subscribed to: '${e}'`)}_reconnect(){1===this.socket.readyState&&this.disconnect(),++this.reconnects<=tn&&(console.warn(`attempting to reconnect...${this.reconnects}/${tn}`),this.connect())}_refreshSubscriptions(){if(this.registry)for(const{args:{eventName:e,filters:t}}of Object.values(this.registry))this._subscribe(e,t)}_listen(){this.socket.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch(e){return void console.error("error parsing json request -",e)}switch(this.responseReceived=!0,en(t)){case Zt.SUB_ACK:this._subHandler(t);break;case Zt.DATA:this._dataHandler(t);break;case Zt.UNSUB_ACK:this._unsubHandler(t)}})}_subHandler(e){const t=e&&e.id?e.id:"";this.registrySubIds[e.result]=t,this.registry[t].subId=e.result}_dataHandler(e){this.dataReceived=!0;const t=e&&e.params&&e.params.result?e.params.result:{},n=e&&e.params&&e.params.subscription?e.params.subscription:"",r=this.registrySubIds[n];this.registry[r]&&this.registry[r].callback&&this.registry[r].callback(t),Xt.notUndefined(this.latestState[r])&&(this.latestState[r]=t)}_unsubHandler(e){const t=e&&e.id?e.id:"",{eventName:n}=this.registry[t].args;e.result?(this.registry[t].unsubCallback(`successfully unsubscribed from - ${n}`),delete this.registry[t]):this.registry[t].unsubCallback(`Error: Not unsubscribed from - ${n}`)}_subscribe(e,t){const n=Xt.notUndefined(t)?[t]:[],r=Yt({eventName:e,filters:t}),s=Qt({id:r,params:[e,...n]});this.socket.send(s)}_unsubscribe(e,t,n){const r=Qt({id:n,method:"unsubscribe",params:[this.registry[n].subId]});this.socket.readyState===this.socket.OPEN&&this.socket.send(r)}};const{API_KEY_HEADER:on,BLOCKCHAIN_ID_HEADER:an,DEFAULT_BASE_URL:cn,DEFAULT_RPC_URL:dn,ERROR_RPC_NO_METHOD:un}=ue,{is:hn,throwIf:ln,formatJsonRpc:pn}=Ne;class fn{constructor(e,t={}){ln(hn.undefined(e)||hn.emptyString(e),"No api key supplied"),this.apiKey=e,this.blockchainId=null,this.headers={},this.headers[on]=this.apiKey,t.blockchainId&&(this.blockchainId=t.blockchainId,this.headers[an]=t.blockchainId),this.wsConfig={...t,websocketUrl:t.websocketUrl?t.websocketUrl:null},this.baseUrl=t.baseUrl?t.baseUrl:cn,this.address=new Ce(this),this.token=new xe(this),this.contract=new ze(this),this.transaction=new nt(this),this.block=new ht(this),this.signature=new gt(this),this.market=new Rt(this)}rawQuery(e){return ce.get(this.baseUrl+e,{headers:this.headers}).then(e=>e.data)}rpc(e,t=[]){return ln(!e,un),ce.post(`${dn}?${on}=${this.apiKey}&${an}=${this.blockchainId}`,pn({method:e,params:t}),{headers:this.headers}).then(e=>e.data,e=>e.response.data)}}var bn=class extends fn{constructor(e,t={}){super(e,t),this.eth=new It(fn,e,t),this.btc=new Ht(fn,e,t),this.bch=new Ut(fn,e,t),this.bsv=new Ft(fn,e,t),this.ltc=new Wt(fn,e,t),this.websocket=null}connect(e){return this.websocket=this.websocket?this.websocket:new sn(this.apiKey,this.wsConfig),this.websocket.connect(e)}disconnect(e){this.websocket?this.websocket.disconnect(e):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.on({eventName:e,filters:t},n):console.error("no event specified")}once({eventName:e,filters:t},n){this.websocket.once({eventName:e,filters:t},n)}off({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.off({eventName:e,filters:t},n):console.error("no event specified")}};return"undefined"!=typeof window&&void 0===window.Web3Data&&(window.Web3Data=bn),bn}));