!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).web3data=t()}(this,(function(){"use strict";var e=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},t=Object.prototype.toString;
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function n(e){return"[object Array]"===t.call(e)}function r(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===t.call(e)}function o(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var a={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===t.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:r,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===t.call(e)},isFile:function(e){return"[object File]"===t.call(e)},isBlob:function(e){return"[object Blob]"===t.call(e)},isFunction:s,isStream:function(e){return r(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:o,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,s=arguments.length;r<s;r++)o(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,s=arguments.length;r<s;r++)o(arguments[r],n);return t},extend:function(t,n,r){return o(n,(function(n,s){t[s]=r&&"function"==typeof n?e(n,r):n})),t},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var c=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(a.isURLSearchParams(t))r=t.toString();else{var s=[];a.forEach(t,(function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,(function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),r=s.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function d(){this.handlers=[]}d.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},d.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},d.prototype.forEach=function(e){a.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var u=d,h=function(e,t,n){return a.forEach(n,(function(n){e=n(e,t)})),e},l=function(e){return!(!e||!e.__CANCEL__)},p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var g=f,E=b;function m(e){if(g===setTimeout)return setTimeout(e,0);if((g===f||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}"function"==typeof p.setTimeout&&(g=setTimeout),"function"==typeof p.clearTimeout&&(E=clearTimeout);var _,O=[],w=!1,T=-1;function A(){w&&_&&(w=!1,_.length?O=_.concat(O):T=-1,O.length&&S())}function S(){if(!w){var e=m(A);w=!0;for(var t=O.length;t;){for(_=O,O=[];++T<t;)_&&_[T].run();T=-1,t=O.length}_=null,w=!1,function(e){if(E===clearTimeout)return clearTimeout(e);if((E===b||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(e);try{E(e)}catch(t){try{return E.call(null,e)}catch(t){return E.call(this,e)}}}(e)}}function N(e,t){this.fun=e,this.array=t}N.prototype.run=function(){this.fun.apply(null,this.array)};function R(){}var y=R,v=R,k=R,I=R,C=R,D=R,B=R;var H=p.performance||{},P=H.now||H.mozNow||H.msNow||H.oNow||H.webkitNow||function(){return(new Date).getTime()};var M=new Date;var L={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];O.push(new N(e,t)),1!==O.length||w||m(S)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:y,addListener:v,once:k,off:I,removeListener:C,removeAllListeners:D,emit:B,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*P.call(H),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-M)/1e3}},U=function(e,t){a.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},x=function(e,t,n,r,s){return function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,s)},K=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],F=a.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=a.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},j=a.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var i=[];i.push(e+"="+encodeURIComponent(t)),a.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),a.isString(r)&&i.push("path="+r),a.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},G=function(e){return new Promise((function(t,n){var r=e.data,s=e.headers;a.isFormData(r)&&delete s["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",d=e.auth.password||"";s.Authorization="Basic "+btoa(i+":"+d)}if(o.open(e.method.toUpperCase(),c(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(e){var t,n,r,s={};return e?(a.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=a.trim(e.substr(0,r)).toLowerCase(),n=a.trim(e.substr(r+1)),t){if(s[t]&&K.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}(o.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(x("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,s),o=null}},o.onabort=function(){o&&(n(x("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(x("Network Error",e,null,o)),o=null},o.ontimeout=function(){n(x("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},a.isStandardBrowserEnv()){var u=j,h=(e.withCredentials||F(e.url))&&e.xsrfCookieName?u.read(e.xsrfCookieName):void 0;h&&(s[e.xsrfHeaderName]=h)}if("setRequestHeader"in o&&a.forEach(s,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete s[t]:o.setRequestHeader(t,e)})),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},$={"Content-Type":"application/x-www-form-urlencoded"};function q(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var W,z={adapter:(void 0!==L&&"[object process]"===Object.prototype.toString.call(L)?W=G:"undefined"!=typeof XMLHttpRequest&&(W=G),W),transformRequest:[function(e,t){return U(t,"Accept"),U(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(q(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(q(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};z.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(e){z.headers[e]={}})),a.forEach(["post","put","patch"],(function(e){z.headers[e]=a.merge($)}));var V=z;function J(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var X=function(e){var t,n,r;return J(e),e.baseURL&&(r=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(r))&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=h(e.data,e.headers,e.transformRequest),e.headers=a.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),a.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||V.adapter)(e).then((function(t){return J(e),t.data=h(t.data,t.headers,e.transformResponse),t}),(function(t){return l(t)||(J(e),t&&t.response&&(t.response.data=h(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Y=function(e,t){t=t||{};var n={};return a.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),a.forEach(["headers","auth","proxy"],(function(r){a.isObject(t[r])?n[r]=a.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:a.isObject(e[r])?n[r]=a.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),a.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function Q(e){this.defaults=e,this.interceptors={request:new u,response:new u}}Q.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Y(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[X,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Q.prototype.getUri=function(e){return e=Y(this.defaults,e),c(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(e){Q.prototype[e]=function(t,n){return this.request(a.merge(n||{},{method:e,url:t}))}})),a.forEach(["post","put","patch"],(function(e){Q.prototype[e]=function(t,n,r){return this.request(a.merge(r||{},{method:e,url:t,data:n}))}}));var Z=Q;function ee(e){this.message=e}ee.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ee.prototype.__CANCEL__=!0;var te=ee;function ne(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new te(e),t(n.reason))}))}ne.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ne.source=function(){var e;return{token:new ne((function(t){e=t})),cancel:e}};var re=ne;function se(t){var n=new Z(t),r=e(Z.prototype.request,n);return a.extend(r,Z.prototype,n),a.extend(r,n),r}var oe=se(V);oe.Axios=Z,oe.create=function(e){return se(Y(oe.defaults,e))},oe.Cancel=te,oe.CancelToken=re,oe.isCancel=l,oe.all=function(e){return Promise.all(e)},oe.spread=function(e){return function(t){return e.apply(null,t)}};var ae=oe,ie=oe;ae.default=ie;var ce=ae,de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports.DEFAULT_WEBSOCKET_URL="wss://ws.web3api.io",e.exports.DEFAULT_BASE_URL="https://web3api.io/api/v2",e.exports.DEFAULT_RPC_URL="https://rpc.web3api.io",e.exports.API_KEY_HEADER="x-api-key",e.exports.BLOCKCHAIN_ID_HEADER="x-amberdata-blockchain-id",e.exports.BLOCKCHAIN_ID_ETHEREUM_MAINNET="1c9c969065fcd1cf",e.exports.BLOCKCHAIN_ID_ETHEREUM_RINKEBY="1b3f7a72b3e99c13",e.exports.BLOCKCHAIN_ID_BITCOIN="408fa195a34b533de9ad9889f076045e",e.exports.BLOCKCHAIN_ID_BITCOIN_CASH="43b45e71cc0615b491cb699e7071fc06",e.exports.BLOCKCHAIN_ID_BITCOIN_SV="a818635d36dbe125e26167c4438e2217",e.exports.BLOCKCHAIN_ID_LITECOIN="f94be61fd9f4fa684f992ddfd4e92272",e.exports.BLOCKCHAIN_ID_RIPPLE="2b8a5d8975e8c2a2ed92450450979a3c",e.exports.BLOCKCHAIN_ID_ZCASH="b7d4f994f33c709be4ce6cbae31d7b8e",e.exports.ADDRESSES_ENDPOINT="/addresses",e.exports.TOKENS_ENDPOINT="/tokens",e.exports.TRANSACTIONS_ENDPOINT="/transactions",e.exports.BLOCKS_ENDPOINT="/blocks",e.exports.CONTRACTS_ENDPOINT="/contracts",e.exports.SIGNATURES_ENDPOINT="/signatures",e.exports.MARKET_ENDPOINT="/market",e.exports.MARKET_FEATURES=["pairs","exchanges","ohlcv","prices","tickers"],e.exports.ERROR_MESSAGE_TOKEN_NO_ADDRESS="No token address supplied",e.exports.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS="No token holder address supplied",e.exports.ERROR_MESSAGE_TRANSACTION_NO_HASH="No transaction hash supplied",e.exports.ERROR_MESSAGE_ADDRESS_NO_ADDRESS="No address supplied",e.exports.ERROR_MESSAGE_CONTRACT_NO_ADDRESS="No contract address supplied",e.exports.ERROR_MESSAGE_BLOCK_NO_ID="No block number or hash supplied",e.exports.ERROR_MESSAGE_MARKET_NO_PAIR="No market pair supplied",e.exports.ERROR_MESSAGE_MARKET_NO_FEATURE=`Missing or unknown. Features: '${e.exports.MARKET_FEATURES.join("', '")}'`,e.exports.ERROR_MESSAGE_SIGNATURE_NO_HASH="No signature hash supplied",e.exports.ERROR_RPC_NO_METHOD="No RPC method provided",e.exports.ETH_METHODS={getBlockNumber:"block",getBlock:"block",getBlockTransactionCount:"block",getUncle:"block",getCode:"contract",getGasPrice:"transaction",getTransactionFromBlock:"block",getTransactions:"block",getTransaction:"transaction",getPendingTransactions:"transaction",getEtherPrice:"market"},e.exports.BTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getLatestBalance","getHistoricalBalance","getMultipleBalances","getBalancesBatch","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions"]},e.exports.LTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getLatestBalance","getHistoricalBalance","getMultipleBalances","getBalancesBatch","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions"]},e.exports.HTTP_CODE_NOT_FOUND=404})),he=(ue.DEFAULT_WEBSOCKET_URL,ue.DEFAULT_BASE_URL,ue.DEFAULT_RPC_URL,ue.API_KEY_HEADER,ue.BLOCKCHAIN_ID_HEADER,ue.BLOCKCHAIN_ID_ETHEREUM_MAINNET,ue.BLOCKCHAIN_ID_ETHEREUM_RINKEBY,ue.BLOCKCHAIN_ID_BITCOIN,ue.BLOCKCHAIN_ID_BITCOIN_CASH,ue.BLOCKCHAIN_ID_BITCOIN_SV,ue.BLOCKCHAIN_ID_LITECOIN,ue.BLOCKCHAIN_ID_RIPPLE,ue.BLOCKCHAIN_ID_ZCASH,ue.ADDRESSES_ENDPOINT,ue.TOKENS_ENDPOINT,ue.TRANSACTIONS_ENDPOINT,ue.BLOCKS_ENDPOINT,ue.CONTRACTS_ENDPOINT,ue.SIGNATURES_ENDPOINT,ue.MARKET_ENDPOINT,ue.MARKET_FEATURES,ue.ERROR_MESSAGE_TOKEN_NO_ADDRESS,ue.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS,ue.ERROR_MESSAGE_TRANSACTION_NO_HASH,ue.ERROR_MESSAGE_ADDRESS_NO_ADDRESS,ue.ERROR_MESSAGE_CONTRACT_NO_ADDRESS,ue.ERROR_MESSAGE_BLOCK_NO_ID,ue.ERROR_MESSAGE_MARKET_NO_PAIR,ue.ERROR_MESSAGE_MARKET_NO_FEATURE,ue.ERROR_MESSAGE_SIGNATURE_NO_HASH,ue.ERROR_RPC_NO_METHOD,ue.ETH_METHODS,ue.BTC_METHODS,ue.LTC_METHODS,ue.HTTP_CODE_NOT_FOUND,[]),le=0;le<256;++le)he[le]=(le+256).toString(16).substr(1);var pe=function(e,t){var n=t||0,r=he;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};function fe(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function be(e,t){return e<<t|e>>>32-t}var ge=function(e,t,n){var r=function(e,r,s,o){var a=s&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof r&&(r=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(r)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var i=n(r.concat(e));if(i[6]=15&i[6]|t,i[8]=63&i[8]|128,s)for(var c=0;c<16;++c)s[a+c]=i[c];return s||pe(i)};try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var s=0;s<r.length;s++)e[s]=r.charCodeAt(s)}e.push(128);var o=e.length/4+2,a=Math.ceil(o/16),i=new Array(a);for(s=0;s<a;s++){i[s]=new Array(16);for(var c=0;c<16;c++)i[s][c]=e[64*s+4*c]<<24|e[64*s+4*c+1]<<16|e[64*s+4*c+2]<<8|e[64*s+4*c+3]}for(i[a-1][14]=8*(e.length-1)/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=8*(e.length-1)&4294967295,s=0;s<a;s++){for(var d=new Array(80),u=0;u<16;u++)d[u]=i[s][u];for(u=16;u<80;u++)d[u]=be(d[u-3]^d[u-8]^d[u-14]^d[u-16],1);var h=n[0],l=n[1],p=n[2],f=n[3],b=n[4];for(u=0;u<80;u++){var g=Math.floor(u/20),E=be(h,5)+fe(g,l,p,f)+b+t[g]+d[u]>>>0;b=f,f=p,p=be(l,30)>>>0,l=h,h=E}n[0]=n[0]+h>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+f>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const{ETH_METHODS:Ee}=ue,me=e=>{let t="";for(const n in e)({}).hasOwnProperty.call(e,n)&&(t+=`${n}=${e[n]}&`);return t},_e=(e,t)=>{if(e)throw new Error(t)},Oe=e=>_e(!0,e),we=()=>{};we.string=e=>"string"==typeof e,we.bool=e=>"boolean"==typeof e,we.emptyString=e=>we.string(e)&&0===e.length,we.emptyObject=e=>0===Object.keys(e).length,we.inObject=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),we.undefined=e=>void 0===e,we.null=e=>null===e,we.notHash=e=>we.undefined(e)||we.emptyString(e),we.notUndefined=e=>!we.undefined(e),we.nonEmptyObject=e=>!we.emptyObject(e),we.nonEmptyString=e=>!we.emptyString(e),we.notInObject=(e,t)=>!we.inObject(e,t);const Te=e=>Object.getOwnPropertyNames(e).filter(t=>"function"==typeof e[t]&&"constructor"!==t);var Ae={buildFilterUrl:me,is:we,throwIf:_e,get:(e,{endpoint:t="",subendpoint:n="",hash:r="",pathParam:s="",filterOptions:o={}})=>{const a=we.nonEmptyObject(o)?"?"+me(o):"";return r=r?"/"+r:"",s=s?"/"+s:"",n=n?"/"+n:"",e.rawQuery(`${t}${r||s}${n}${a}`)},rejectPromiseIf:(e,t)=>{if(e)return Promise.reject(new Error(t))},uuid:e=>ge(JSON.stringify(e),"ccfeca02-f0e9-4433-a740-b830cceb3d2d"),ethFactory:function(e){const t={};for(const n in Ee)({}).hasOwnProperty.call(Ee,n)&&(t[n]=e[Ee[n]][n].bind(e[Ee[n]]));return t},methodFactory:(e,t)=>(Object.keys(t).forEach(n=>{Te(Object.getPrototypeOf(e.web3data[n])).forEach(r=>{t[n].includes(r)&&(e[n]=e[n]?e[n]:{},e[n][r]=e.web3data[n][r].bind(e))})}),e),throwNow:Oe,onFulfilled:function(e){return _e(e.error,e.message),this&&this.formatter?this.formatter(e.payload):e.payload},onError:({response:{data:e}})=>Oe(e.message||e.description),formatJsonRpc:e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",getMethods:Te,recordsFormatter:e=>((e,t)=>e[t]?e[t]:null)(e,"records")};const{ERROR_MESSAGE_ADDRESS_NO_ADDRESS:Se,ADDRESSES_ENDPOINT:Ne}=ue,{is:Re,get:ye,throwIf:ve,onFulfilled:ke,onError:Ie,recordsFormatter:Ce}=Ae;var De=class{constructor(e){this.web3data=e}getAllAddresses(e={}){return this.getAll(e)}getAll(e={}){return ye(this.web3data,{endpoint:Ne,filterOptions:e}).then(ke.bind({formatter:Ce}),Ie)}getInformation(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"information",filterOptions:t}).then(ke,Ie)}getMetadata(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"metadata",filterOptions:t}).then(ke,Ie)}getAdoption(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"adoption",filterOptions:t}).then(ke,Ie)}getInternalMessages(e,t={}){return this.web3data.address.getFunctions(e,t)}getFunctions(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"functions",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getLogs(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"logs",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getTransactions(e,t={}){return ve(!e,Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"transactions",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getPendingTransactions(e,t={}){return ve(!e,Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"pending-transactions",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getBalance(e,t={}){return ve(Re.notHash(e),Se),t.startDate||t.endDate?this.web3data.address.getHistoricalBalance(e,t).then(e=>e):this.web3data.address.getLatestBalance(e,t).then(e=>e)}getLatestBalance(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"account-balances/latest",filterOptions:t}).then(ke,Ie)}getHistoricalBalance(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"account-balances/historical",filterOptions:t}).then(ke,Ie)}getMultipleBalances(e,t={}){return Array.isArray(e)?this.web3data.address.getBalancesBatch(e,t):this.web3data.address.getBalances(e,t)}getBalances(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"balances",filterOptions:t}).then(ke,Ie)}getBalancesBatch(e,t={}){return ve(!Array.isArray(e),"Must be array of valid address hashes"),e.forEach(e=>ve(Re.notHash(e),Se)),t.addresses=e,ye(this.web3data,{endpoint:Ne,subendpoint:"balances",filterOptions:t}).then(ke,Ie)}getTokens(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"tokens",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getTokenTransfers(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"token-transfers",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getTokenBalances(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"token-balances",filterOptions:t}).then(ke.bind({formatter:Ce}),Ie)}getUsage(e,t={}){return ve(Re.notHash(e),Se),ye(this.web3data,{hash:e,endpoint:Ne,subendpoint:"usage",filterOptions:t}).then(ke,Ie)}getMetrics(){return ye(this.web3data,{endpoint:Ne,subendpoint:"metrics/latest"}).then(ke,Ie)}};const{is:Be,get:He,onFulfilled:Pe,onError:Me,throwIf:Le,recordsFormatter:Ue}=Ae,{ERROR_MESSAGE_TOKEN_NO_ADDRESS:xe,ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS:Ke,TOKENS_ENDPOINT:Fe}=ue;var je=class{constructor(e){this.web3data=e}getRankings(e={}){return He(this.web3data,{endpoint:Fe,subendpoint:"rankings",filterOptions:e}).then(Pe,Me)}getVolume(e,t={}){return Le(Be.notHash(e),xe),He(this.web3data,{hash:e,endpoint:Fe,subendpoint:"volume",filterOptions:t}).then(Pe,Me)}getVelocity(e,t={}){return Le(Be.notHash(e),xe),He(this.web3data,{hash:e,endpoint:Fe,subendpoint:"velocity",filterOptions:t}).then(Pe,Me)}getHolders(e,t={}){Le(Be.notHash(e),xe);let n="holders/latest",r={formatter:Ue};return t.holderAddresses&&(n="holders/historical",r={}),He(this.web3data,{hash:e,endpoint:Fe,subendpoint:n,filterOptions:t}).then(Pe.bind(r),Me)}getHoldersHistorical(e,t){return Le(Be.notInObject(t,"holderAddresses"),Ke),this.getHolders(e,t)}getSupplies(e,t={}){Le(Be.notHash(e),xe);const n=t.startDate||t.endDate?"supplies/historical":"supplies/latest";return He(this.web3data,{hash:e,endpoint:Fe,subendpoint:n,filterOptions:t}).then(Pe,Me)}getTransfers(e,t={}){return Le(Be.notHash(e),xe),He(this.web3data,{hash:e,endpoint:Fe,subendpoint:"transfers",filterOptions:t}).then(Pe.bind({formatter:Ue}),Me)}};const{ERROR_MESSAGE_CONTRACT_NO_ADDRESS:Ge,CONTRACTS_ENDPOINT:$e}=ue,{is:qe,get:We,throwIf:ze,onFulfilled:Ve,onError:Je}=Ae;var Xe=class{constructor(e){this.web3data=e}getDetails(e){return ze(qe.notHash(e),Ge),We(this.web3data,{pathParam:e,endpoint:$e}).then(Ve,Je)}getFunctions(e){return qe.notHash(e)?Promise.reject(new Error(Ge)):We(this.web3data,{pathParam:e,endpoint:$e,subendpoint:"functions"}).then(Ve,Je)}getSecurityAudit(e){return qe.notHash(e)?Promise.reject(new Error(Ge)):We(this.web3data,{pathParam:e,endpoint:$e,subendpoint:"audit"}).then(Ve,Je)}getAbi(e){return ze(qe.notHash(e),Ge),this.getDetails(e).then(({abi:e})=>e)}getSourceCode(e){return ze(qe.notHash(e),Ge),We(this.web3data,{pathParam:e,endpoint:$e,subendpoint:"source-code"}).then(Ve,Je)}getCode(e){return this.getDetails(e).then(e=>e.bytecode||"0x")}};const{TRANSACTIONS_ENDPOINT:Ye,ERROR_MESSAGE_TRANSACTION_NO_HASH:Qe}=ue,{is:Ze,get:et,onFulfilled:tt,onError:nt,throwIf:rt,recordsFormatter:st}=Ae;var ot=class{constructor(e){this.web3data=e}getTransactions(e={}){return et(this.web3data,{endpoint:Ye,filterOptions:e}).then(tt.bind({formatter:st}),nt)}getAll(e){return this.getTransactions(e)}getTransaction(e,t={}){return rt(Ze.notHash(e),Qe),et(this.web3data,{pathParam:e,endpoint:Ye,filterOptions:t}).then(tt,nt)}getPendingTransactions(){return this.getTransactions({status:"pending"}).then(e=>(rt(Ze.undefined(e)||Ze.null(e),"Failed to retrieve pending transactions."),e),console.error)}getGasPrediction(){return et(this.web3data,{endpoint:Ye,subendpoint:"gas/predictions"}).then(tt,nt)}getGasPercentiles(e={}){return et(this.web3data,{endpoint:Ye,subendpoint:"gas/percentiles",filterOptions:e}).then(tt,nt)}getGasPrice(){return this.getGasPrediction().then(e=>(rt(!e.average||!e.average.gasPrice,"Failed to retrieve gas price."),`${e.average.gasPrice}`))}getVolume(e={}){return et(this.web3data,{endpoint:Ye,subendpoint:"volume",filterOptions:e}).then(tt,nt)}getMetrics(e={}){return et(this.web3data,{endpoint:Ye,subendpoint:"metrics/latest",filterOptions:e}).then(tt,nt)}};const{BLOCKS_ENDPOINT:at,ERROR_MESSAGE_BLOCK_NO_ID:it}=ue,{is:ct,get:dt,throwIf:ut,onFulfilled:ht,onError:lt,recordsFormatter:pt}=Ae;var ft=class{constructor(e){this.web3data=e}getBlocks(e){return dt(this.web3data,{endpoint:at,filterOptions:e}).then(ht.bind({formatter:pt}),lt)}getBlock(e,t){return ut(ct.undefined(e),it),dt(this.web3data,{pathParam:e,endpoint:at,filterOptions:t}).then(ht,lt)}getBlockNumber(){return this.web3data.block.getBlock("latest").then(e=>(ut(e|!e.number,"Failed to retrieve block number."),parseInt(e.number,10)))}getBlockTransactionCount(e){return this.web3data.block.getBlock(e).then(e=>(ut(!e||!e.predictions&&!e.numTransactions,"Failed to retrieve block transaction count."),e.predictions?null:parseInt(e.numTransactions,10)))}getTransactions(e,t){return ut(ct.undefined(e),it),dt(this.web3data,{pathParam:e,endpoint:at,subendpoint:"transactions",filterOptions:t}).then(ht.bind({formatter:pt}),lt)}getTransactionFromBlock(e,t){return ut(ct.undefined(e),it),this.web3data.block.getTransactions(e).then(e=>(ut(!e,"Failed to retrieve transaction."),t<e.length&&t>-1?e[t]:null))}getUncle(e,t){return ut(ct.undefined(e),it),ut(ct.undefined(t),"Missing required param 'index'"),this.web3data.block.getBlock(e,{validationMethod:"full"}).then(e=>(ut(!e||!e.predictions&&!e.numTransactions&&!e.validation,"Failed to retrieve uncle."),!e.predictions&&e.validation.uncles&&t<e.validation.uncles.length&&t>-1?e.validation.uncles[t]:null))}getTokenTransfers(e,t){return ut(ct.undefined(e),it),dt(this.web3data,{pathParam:e,endpoint:at,subendpoint:"token-transfers",filterOptions:t}).then(ht,lt)}getLogs(e,t){return ut(ct.undefined(e),it),dt(this.web3data,{pathParam:e,endpoint:at,subendpoint:"logs",filterOptions:t}).then(ht.bind({formatter:pt}),lt)}getFunctions(e,t){return ut(ct.undefined(e),it),dt(this.web3data,{pathParam:e,endpoint:at,subendpoint:"functions",filterOptions:t}).then(ht.bind({formatter:pt}),lt)}getMetrics(e){return dt(this.web3data,{endpoint:at,subendpoint:"metrics/latest",filterOptions:e}).then(ht,lt)}};const{get:bt,is:gt,throwIf:Et,onError:mt,onFulfilled:_t}=Ae,{SIGNATURES_ENDPOINT:Ot,ERROR_MESSAGE_SIGNATURE_NO_HASH:wt}=ue;var Tt=class{constructor(e){this.web3data=e}getSignature(e){return Et(gt.notHash(e),wt),bt(this.web3data,{hash:e,endpoint:Ot}).then(_t,mt)}};const{is:At,get:St,throwIf:Nt,onFulfilled:Rt,onError:yt}=Ae,{MARKET_FEATURES:vt,MARKET_ENDPOINT:kt,ERROR_MESSAGE_MARKET_NO_PAIR:It,ERROR_MESSAGE_MARKET_NO_FEATURE:Ct}=ue;var Dt=class{constructor(e){this.web3data=e}async getEtherPrice(){return St(this.web3data,{endpoint:kt+"/prices/eth/latest"}).then(e=>e.payload.eth_usd.price,yt)}getRankings(e){return St(this.web3data,{endpoint:kt,subendpoint:"rankings",filterOptions:e}).then(Rt,yt)}getFeatures(e=vt,t={}){return e=(e=Array.isArray(e)?e:[e]).map(e=>{switch(Nt(At.undefined(e)||!vt.includes(e),Ct),e){case"prices":e+="/pairs";break;case"ohlcv":case"tickers":e+="/information"}return St(this.web3data,{endpoint:kt,subendpoint:e,filterOptions:t}).then(Rt,yt).then(t=>({[e.split("/")[0]]:t}))}),Promise.all([...e]).then(e=>e.reduce((e,t)=>({...e,...t})))}getOhlcv(e,t={}){Nt(At.undefined(e),It);const n=t.startDate||t.endDate?"historical":"latest";return St(this.web3data,{pathParam:e,endpoint:`${kt}/ohlcv`,subendpoint:n,filterOptions:t}).then(Rt,yt)}getOrders(e,t,n={}){return Nt(At.undefined(e),It),(t=Array.isArray(t)?t:[t]).forEach(e=>Nt(At.undefined(e),"No exchange specified")),n.exchange=t,St(this.web3data,{pathParam:e,endpoint:`${kt}/orders`,filterOptions:n}).then(Rt,yt)}getOrderBooks(e,t={}){return Nt(At.undefined(e),It),St(this.web3data,{pathParam:e,endpoint:`${kt}/orders`,subendpoint:"update",filterOptions:t}).then(Rt,yt)}getBbos(e,t={}){Nt(At.undefined(e),It);const n=t.startDate||t.endDate?"bbo/historical":"bbo";return St(this.web3data,{pathParam:e,endpoint:`${kt}/orders`,subendpoint:n,filterOptions:t}).then(Rt,yt)}getPrices(e,t={}){Nt(At.undefined(e),It);const n=t.startDate||t.endDate?"historical":"latest";return St(this.web3data,{pathParam:e,endpoint:`${kt}/prices`,subendpoint:n,filterOptions:t}).then(Rt,yt)}getTokenPrices(e,t={}){Nt(At.notHash(e),It);const n=t.startDate||t.endDate?"historical":"latest";return St(this.web3data,{hash:e,endpoint:`${kt}/tokens/prices`,subendpoint:n,filterOptions:t}).then(Rt,yt)}getVwap(e,t={}){return Nt(At.undefined(e),It),St(this.web3data,{pathParam:e,endpoint:`${kt}/prices`,subendpoint:"wap/latest",filterOptions:t}).then(Rt,yt)}getTickers(e,t={}){Nt(At.undefined(e),It);const n=t.startDate||t.endDate?"historical":"latest";return St(this.web3data,{pathParam:e,endpoint:`${kt}/tickers`,subendpoint:n,filterOptions:t}).then(Rt,yt)}getTrades(e,t={}){return Nt(At.undefined(e),It),St(this.web3data,{pathParam:e,endpoint:`${kt}/trades`,subendpoint:"historical",filterOptions:t}).then(Rt,yt)}getAssetAddresses(e="all"){return St(this.web3data,{endpoint:`${kt}/pairs/addresses`,filterOptions:{symbols:e}}).then(Rt,yt)}};const{throwIf:Bt,ethFactory:Ht}=Ae,{BLOCKCHAIN_ID_ETHEREUM_MAINNET:Pt}=ue;var Mt=class{constructor(e,t,n){n.blockchainId=Pt,this.web3data=new e(t,n);const r=Ht(this.web3data);for(const e in r)({}).hasOwnProperty.call(r,e)&&(this[e]=r[e])}async getBalance(e){let t;try{t=await this.web3data.address.getBalance(e)}catch(e){Bt(!0,e.message)}return t&&t.value?t.value:null}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN:Lt,BTC_METHODS:Ut}=ue,{methodFactory:xt}=Ae;var Kt=class{constructor(e,t,n){n.blockchainId=Lt,this.web3data=new e(t,n),xt(this,Ut)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_CASH:Ft,BTC_METHODS:jt}=ue,{methodFactory:Gt}=Ae;var $t=class{constructor(e,t,n){n.blockchainId=Ft,this.web3data=new e(t,n),Gt(this,jt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_SV:qt,BTC_METHODS:Wt}=ue,{methodFactory:zt}=Ae;var Vt=class{constructor(e,t,n){n.blockchainId=qt,this.web3data=new e(t,n),zt(this,Wt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_LITECOIN:Jt,LTC_METHODS:Xt}=ue,{methodFactory:Yt}=Ae;var Qt=class{constructor(e,t,n){n.blockchainId=Jt,this.web3data=new e(t,n),Yt(this,Xt)}rpc(e,t){return this.web3data.rpc(e,t)}},Zt=null;"undefined"!=typeof WebSocket?Zt=WebSocket:"undefined"!=typeof MozWebSocket?Zt=MozWebSocket:void 0!==de?Zt=de.WebSocket||de.MozWebSocket:"undefined"!=typeof window?Zt=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(Zt=self.WebSocket||self.MozWebSocket);var en=Zt;const{DEFAULT_WEBSOCKET_URL:tn}=ue,{is:nn,uuid:rn}=Ae,sn=e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",on={SUB_ACK:0,DATA:1,UNSUB_ACK:2},an=e=>e.params?on.DATA:nn.string(e.result)?on.SUB_ACK:nn.bool(e.result)?on.UNSUB_ACK:void 0,cn=3,dn=18e5,un=5e3;var hn=class{constructor(e,t){return this.socket=null,this.baseWsUrl=t&&t.websocketUrl?t.websocketUrl:tn,this.apiKey=e,this.blockchainId=null,this.connected=!1,this.reconnects=0,this.responseReceived=!1,this.dataReceived=!1,t.blockchainId&&(this.blockchainId=t.blockchainId),this.registry={},this.registrySubIds={},this.latestState={},this}connect(e){if(this.socket&&1===this.socket.readyState)return;const t=this.apiKey?`?x-api-key=${this.apiKey}`:"",n=this.blockchainId?`&x-amberdata-blockchain-id=${this.blockchainId}`:"";this.socket=new en(`${this.baseWsUrl}${t}${n}`),this.socket.addEventListener("open",t=>{console.info("websocket client connection opened"),this.connected=!0,this._refreshSubscriptions(),this._listen(),e&&e(t),setTimeout(()=>{!this.responseReceived&&nn.nonEmptyObject(this.registry)&&this.socket&&this.socket.close()},un),setTimeout(()=>{!this.dataReceived&&nn.nonEmptyObject(this.registry)&&this.socket.close()},dn)}),this.socket.addEventListener("error",t=>{e&&t?e("connection error occurred",t):console.error("connection error occurred"),this._reconnect()}),this.socket.addEventListener("close",e=>{console.info("Websocket client connection closed - code",e.code),this._reconnect()})}disconnect(e=null){this.socket&&1===this.socket.readyState?(this.socket.onclose=e?()=>e("Websocket client connection closed"):()=>console.info("Websocket client connection closed"),this.socket.close(),this.socket=null):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=rn({eventName:e,filters:t});this.connected&&this._subscribe(e,t),this.registry[r]={},this.registry[r].callback=n,this.registry[r].args={eventName:e,filters:t}}once({eventName:e,filters:t},n){this.on({eventName:e,filters:t},r=>{this.off({eventName:e,filters:t},()=>{}),n&&n(r),this.registry[rn({eventName:e,filters:t})].callback=null})}off({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=rn({eventName:e,filters:t});this.registry[r]&&this.registry[r].subId?(this._unsubscribe(e,t,r),this.registry[r].unsubCallback=n):console.error(`Not subscribed to: '${e}'`)}_reconnect(){1===this.socket.readyState&&this.disconnect(),++this.reconnects<=cn&&(console.warn(`attempting to reconnect...${this.reconnects}/${cn}`),this.connect())}_refreshSubscriptions(){if(this.registry)for(const{args:{eventName:e,filters:t}}of Object.values(this.registry))this._subscribe(e,t)}_listen(){this.socket.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch(e){return void console.error("error parsing json request -",e)}switch(this.responseReceived=!0,an(t)){case on.SUB_ACK:this._subHandler(t);break;case on.DATA:this._dataHandler(t);break;case on.UNSUB_ACK:this._unsubHandler(t)}})}_subHandler(e){const t=e&&e.id?e.id:"";this.registrySubIds[e.result]=t,this.registry[t].subId=e.result}_dataHandler(e){this.dataReceived=!0;const t=e&&e.params&&e.params.result?e.params.result:{},n=e&&e.params&&e.params.subscription?e.params.subscription:"",r=this.registrySubIds[n];this.registry[r]&&this.registry[r].callback&&this.registry[r].callback(t),nn.notUndefined(this.latestState[r])&&(this.latestState[r]=t)}_unsubHandler(e){const t=e&&e.id?e.id:"",{eventName:n}=this.registry[t].args;e.result?(this.registry[t].unsubCallback(`successfully unsubscribed from - ${n}`),delete this.registry[t]):this.registry[t].unsubCallback(`Error: Not unsubscribed from - ${n}`)}_subscribe(e,t){const n=nn.notUndefined(t)?[t]:[],r=rn({eventName:e,filters:t}),s=sn({id:r,params:[e,...n]});this.socket.send(s)}_unsubscribe(e,t,n){const r=sn({id:n,method:"unsubscribe",params:[this.registry[n].subId]});this.socket.readyState===this.socket.OPEN&&this.socket.send(r)}};const{API_KEY_HEADER:ln,BLOCKCHAIN_ID_HEADER:pn,DEFAULT_BASE_URL:fn,DEFAULT_RPC_URL:bn,ERROR_RPC_NO_METHOD:gn}=ue,{is:En,throwIf:mn,formatJsonRpc:_n}=Ae;class On{constructor(e,t={}){mn(En.undefined(e)||En.emptyString(e),"No api key supplied"),this.apiKey=e,this.blockchainId=null,this.headers={},this.headers[ln]=this.apiKey,t.blockchainId&&(this.blockchainId=t.blockchainId,this.headers[pn]=t.blockchainId),this.wsConfig={...t,websocketUrl:t.websocketUrl?t.websocketUrl:null},this.baseUrl=t.baseUrl?t.baseUrl:fn,this.address=new De(this),this.token=new je(this),this.contract=new Xe(this),this.transaction=new ot(this),this.block=new ft(this),this.signature=new Tt(this),this.market=new Dt(this)}rawQuery(e){return ce.get(this.baseUrl+e,{headers:this.headers}).then(e=>e.data)}rpc(e,t=[]){return mn(!e,gn),ce.post(`${bn}?${ln}=${this.apiKey}&${pn}=${this.blockchainId}`,_n({method:e,params:t}),{headers:this.headers}).then(e=>e.data,e=>e.response.data)}}var wn=class extends On{constructor(e,t={}){super(e,t),this.eth=new Mt(On,e,t),this.btc=new Kt(On,e,t),this.bch=new $t(On,e,t),this.bsv=new Vt(On,e,t),this.ltc=new Qt(On,e,t),this.websocket=null}connect(e){return this.websocket=this.websocket?this.websocket:new hn(this.apiKey,this.wsConfig),this.websocket.connect(e)}disconnect(e){this.websocket?this.websocket.disconnect(e):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.on({eventName:e,filters:t},n):console.error("no event specified")}once({eventName:e,filters:t},n){this.websocket.once({eventName:e,filters:t},n)}off({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.off({eventName:e,filters:t},n):console.error("no event specified")}};return"undefined"!=typeof window&&void 0===window.Web3Data&&(window.Web3Data=wn),wn}));