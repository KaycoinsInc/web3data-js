!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).web3data=t()}(this,(function(){"use strict";var e=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},t=Object.prototype.toString;function n(e){return"[object Array]"===t.call(e)}function r(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function o(e){return"[object Function]"===t.call(e)}function i(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var a={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===t.call(e)},isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:r,isDate:function(e){return"[object Date]"===t.call(e)},isFile:function(e){return"[object File]"===t.call(e)},isBlob:function(e){return"[object Blob]"===t.call(e)},isFunction:o,isStream:function(e){return s(e)&&o(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:i,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,s=arguments.length;r<s;r++)i(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,s=arguments.length;r<s;r++)i(arguments[r],n);return t},extend:function(t,n,r){return i(n,(function(n,s){t[s]=r&&"function"==typeof n?e(n,r):n})),t},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function c(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var d=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(a.isURLSearchParams(t))r=t.toString();else{var s=[];a.forEach(t,(function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,(function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),s.push(c(t)+"="+c(e))})))})),r=s.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function u(){this.handlers=[]}u.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},u.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},u.prototype.forEach=function(e){a.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var h=u,l=function(e,t,n){return a.forEach(n,(function(n){e=n(e,t)})),e},p=function(e){return!(!e||!e.__CANCEL__)},f="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function b(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}var E=b,m=g;function _(e){if(E===setTimeout)return setTimeout(e,0);if((E===b||!E)&&setTimeout)return E=setTimeout,setTimeout(e,0);try{return E(e,0)}catch(t){try{return E.call(null,e,0)}catch(t){return E.call(this,e,0)}}}"function"==typeof f.setTimeout&&(E=setTimeout),"function"==typeof f.clearTimeout&&(m=clearTimeout);var O,w=[],T=!1,N=-1;function S(){T&&O&&(T=!1,O.length?w=O.concat(w):N=-1,w.length&&R())}function R(){if(!T){var e=_(S);T=!0;for(var t=w.length;t;){for(O=w,w=[];++N<t;)O&&O[N].run();N=-1,t=w.length}O=null,T=!1,function(e){if(m===clearTimeout)return clearTimeout(e);if((m===g||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}(e)}}function A(e,t){this.fun=e,this.array=t}A.prototype.run=function(){this.fun.apply(null,this.array)};function y(){}var v=y,k=y,I=y,C=y,D=y,H=y,B=y;var M=f.performance||{},P=M.now||M.mozNow||M.msNow||M.oNow||M.webkitNow||function(){return(new Date).getTime()};var L=new Date;var x={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];w.push(new A(e,t)),1!==w.length||T||_(R)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:v,addListener:k,once:I,off:C,removeListener:D,removeAllListeners:H,emit:B,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*P.call(M),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-L)/1e3}},U=function(e,t){a.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},K=function(e,t,n,r,s){return function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,s)},F=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],j=a.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=a.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},G=a.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var i=[];i.push(e+"="+encodeURIComponent(t)),a.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),a.isString(r)&&i.push("path="+r),a.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},$=function(e){return new Promise((function(t,n){var r=e.data,s=e.headers;a.isFormData(r)&&delete s["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",c=e.auth.password||"";s.Authorization="Basic "+btoa(i+":"+c)}var u,h,l=(u=e.baseURL,h=e.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(h)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,h):h);if(o.open(e.method.toUpperCase(),d(l,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(e){var t,n,r,s={};return e?(a.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=a.trim(e.substr(0,r)).toLowerCase(),n=a.trim(e.substr(r+1)),t){if(s[t]&&F.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}(o.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(K("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,s),o=null}},o.onabort=function(){o&&(n(K("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(K("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(K(t,e,"ECONNABORTED",o)),o=null},a.isStandardBrowserEnv()){var p=G,f=(e.withCredentials||j(l))&&e.xsrfCookieName?p.read(e.xsrfCookieName):void 0;f&&(s[e.xsrfHeaderName]=f)}if("setRequestHeader"in o&&a.forEach(s,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete s[t]:o.setRequestHeader(t,e)})),a.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},q={"Content-Type":"application/x-www-form-urlencoded"};function W(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var z,V={adapter:("undefined"!=typeof XMLHttpRequest?z=$:void 0!==x&&"[object process]"===Object.prototype.toString.call(x)&&(z=$),z),transformRequest:[function(e,t){return U(t,"Accept"),U(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(W(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(W(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};V.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(e){V.headers[e]={}})),a.forEach(["post","put","patch"],(function(e){V.headers[e]=a.merge(q)}));var J=V;function X(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Y=function(e){return X(e),e.headers=e.headers||{},e.data=l(e.data,e.headers,e.transformRequest),e.headers=a.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),a.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||J.adapter)(e).then((function(t){return X(e),t.data=l(t.data,t.headers,e.transformResponse),t}),(function(t){return p(t)||(X(e),t&&t.response&&(t.response.data=l(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Z=function(e,t){t=t||{};var n={},r=["url","method","params","data"],s=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];a.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),a.forEach(s,(function(r){a.isObject(t[r])?n[r]=a.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:a.isObject(e[r])?n[r]=a.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),a.forEach(o,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var i=r.concat(s).concat(o),c=Object.keys(t).filter((function(e){return-1===i.indexOf(e)}));return a.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function Q(e){this.defaults=e,this.interceptors={request:new h,response:new h}}Q.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Z(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Y,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Q.prototype.getUri=function(e){return e=Z(this.defaults,e),d(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(e){Q.prototype[e]=function(t,n){return this.request(a.merge(n||{},{method:e,url:t}))}})),a.forEach(["post","put","patch"],(function(e){Q.prototype[e]=function(t,n,r){return this.request(a.merge(r||{},{method:e,url:t,data:n}))}}));var ee=Q;function te(e){this.message=e}te.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},te.prototype.__CANCEL__=!0;var ne=te;function re(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new ne(e),t(n.reason))}))}re.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},re.source=function(){var e;return{token:new re((function(t){e=t})),cancel:e}};var se=re;function oe(t){var n=new ee(t),r=e(ee.prototype.request,n);return a.extend(r,ee.prototype,n),a.extend(r,n),r}var ie=oe(J);ie.Axios=ee,ie.create=function(e){return oe(Z(ie.defaults,e))},ie.Cancel=ne,ie.CancelToken=se,ie.isCancel=p,ie.all=function(e){return Promise.all(e)},ie.spread=function(e){return function(t){return e.apply(null,t)}};var ae=ie,ce=ie;ae.default=ce;var de=ae,ue="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var he=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports.DEFAULT_WEBSOCKET_URL="wss://ws.web3api.io",e.exports.DEFAULT_BASE_URL="https://web3api.io/api/v2",e.exports.DEFAULT_RPC_URL="https://rpc.web3api.io",e.exports.API_KEY_HEADER="x-api-key",e.exports.BLOCKCHAIN_ID_HEADER="x-amberdata-blockchain-id",e.exports.BLOCKCHAIN_ID_ETHEREUM_MAINNET="1c9c969065fcd1cf",e.exports.BLOCKCHAIN_ID_ETHEREUM_RINKEBY="1b3f7a72b3e99c13",e.exports.BLOCKCHAIN_ID_BITCOIN="408fa195a34b533de9ad9889f076045e",e.exports.BLOCKCHAIN_ID_BITCOIN_CASH="43b45e71cc0615b491cb699e7071fc06",e.exports.BLOCKCHAIN_ID_BITCOIN_SV="a818635d36dbe125e26167c4438e2217",e.exports.BLOCKCHAIN_ID_LITECOIN="f94be61fd9f4fa684f992ddfd4e92272",e.exports.BLOCKCHAIN_ID_RIPPLE="2b8a5d8975e8c2a2ed92450450979a3c",e.exports.BLOCKCHAIN_ID_ZCASH="b7d4f994f33c709be4ce6cbae31d7b8e",e.exports.BLOCKCHAIN_ID_STELLAR="822e2ebe02f74df8",e.exports.ADDRESSES_ENDPOINT="/addresses",e.exports.TOKENS_ENDPOINT="/tokens",e.exports.TRANSACTIONS_ENDPOINT="/transactions",e.exports.BLOCKS_ENDPOINT="/blocks",e.exports.BLOCKCHAINS_ENDPOINT="/blockchains",e.exports.CONTRACTS_ENDPOINT="/contracts",e.exports.SIGNATURES_ENDPOINT="/signatures",e.exports.MARKET_ENDPOINT="/market",e.exports.MARKET_FEATURES=["pairs","exchanges","ohlcv","prices","tickers","trades"],e.exports.ERROR_MESSAGE_TOKEN_NO_ADDRESS="No token address supplied",e.exports.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS="No token holder address supplied",e.exports.ERROR_MESSAGE_TRANSACTION_NO_HASH="No transaction hash supplied",e.exports.ERROR_MESSAGE_ADDRESS_NO_ADDRESS="No address supplied",e.exports.ERROR_MESSAGE_CONTRACT_NO_ADDRESS="No contract address supplied",e.exports.ERROR_MESSAGE_BLOCK_NO_ID="No block number or hash supplied",e.exports.ERROR_MESSAGE_MARKET_NO_PAIR="No market pair supplied",e.exports.ERROR_MESSAGE_MARKET_NO_BASE="No market base supplied",e.exports.ERROR_MESSAGE_MARKET_NO_FEATURE=`Missing or unknown. Features: '${e.exports.MARKET_FEATURES.join("', '")}'`,e.exports.ERROR_MESSAGE_SIGNATURE_NO_HASH="No signature hash supplied",e.exports.ERROR_RPC_NO_METHOD="No RPC method provided",e.exports.ETH_METHODS={getBlockNumber:"block",getBlock:"block",getBlockTransactionCount:"block",getUncle:"block",getCode:"contract",getGasPrice:"transaction",getTransactionFromBlock:"block",getTransactions:"block",getTransaction:"transaction",getPendingTransactions:"transaction",getEtherPrice:"market",getBalance:"address",getMetrics:"block"},e.exports.BTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],blockchain:["getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions","getMetrics"]},e.exports.LTC_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getPendingTransactions","getBalance","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],blockchain:["getMetrics"],transaction:["getTransactions","getTransaction","getPendingTransactions","getMetrics"]},e.exports.XLM_METHODS={address:["getAllAddresses","getInformation","getMetadata","getTransactions","getBalance","getMetrics"],block:["getBlocks","getBlock","getBlockNumber","getTransactions","getTransactionFromBlock","getMetrics"],blockchain:["getMetrics"],transaction:["getTransactions","getTransaction","getMetrics"]},e.exports.HTTP_CODE_NOT_FOUND=404})),le=(he.DEFAULT_WEBSOCKET_URL,he.DEFAULT_BASE_URL,he.DEFAULT_RPC_URL,he.API_KEY_HEADER,he.BLOCKCHAIN_ID_HEADER,he.BLOCKCHAIN_ID_ETHEREUM_MAINNET,he.BLOCKCHAIN_ID_ETHEREUM_RINKEBY,he.BLOCKCHAIN_ID_BITCOIN,he.BLOCKCHAIN_ID_BITCOIN_CASH,he.BLOCKCHAIN_ID_BITCOIN_SV,he.BLOCKCHAIN_ID_LITECOIN,he.BLOCKCHAIN_ID_RIPPLE,he.BLOCKCHAIN_ID_ZCASH,he.BLOCKCHAIN_ID_STELLAR,he.ADDRESSES_ENDPOINT,he.TOKENS_ENDPOINT,he.TRANSACTIONS_ENDPOINT,he.BLOCKS_ENDPOINT,he.BLOCKCHAINS_ENDPOINT,he.CONTRACTS_ENDPOINT,he.SIGNATURES_ENDPOINT,he.MARKET_ENDPOINT,he.MARKET_FEATURES,he.ERROR_MESSAGE_TOKEN_NO_ADDRESS,he.ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS,he.ERROR_MESSAGE_TRANSACTION_NO_HASH,he.ERROR_MESSAGE_ADDRESS_NO_ADDRESS,he.ERROR_MESSAGE_CONTRACT_NO_ADDRESS,he.ERROR_MESSAGE_BLOCK_NO_ID,he.ERROR_MESSAGE_MARKET_NO_PAIR,he.ERROR_MESSAGE_MARKET_NO_BASE,he.ERROR_MESSAGE_MARKET_NO_FEATURE,he.ERROR_MESSAGE_SIGNATURE_NO_HASH,he.ERROR_RPC_NO_METHOD,he.ETH_METHODS,he.BTC_METHODS,he.LTC_METHODS,he.XLM_METHODS,he.HTTP_CODE_NOT_FOUND,[]),pe=0;pe<256;++pe)le[pe]=(pe+256).toString(16).substr(1);var fe=function(e,t){var n=t||0,r=le;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};function be(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function ge(e,t){return e<<t|e>>>32-t}var Ee=function(e,t,n){var r=function(e,r,s,o){var i=s&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof r&&(r=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(r)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=n(r.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,s)for(var c=0;c<16;++c)s[i+c]=a[c];return s||fe(a)};try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var s=0;s<r.length;s++)e[s]=r.charCodeAt(s)}e.push(128);var o=e.length/4+2,i=Math.ceil(o/16),a=new Array(i);for(s=0;s<i;s++){a[s]=new Array(16);for(var c=0;c<16;c++)a[s][c]=e[64*s+4*c]<<24|e[64*s+4*c+1]<<16|e[64*s+4*c+2]<<8|e[64*s+4*c+3]}for(a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295,s=0;s<i;s++){for(var d=new Array(80),u=0;u<16;u++)d[u]=a[s][u];for(u=16;u<80;u++)d[u]=ge(d[u-3]^d[u-8]^d[u-14]^d[u-16],1);var h=n[0],l=n[1],p=n[2],f=n[3],b=n[4];for(u=0;u<80;u++){var g=Math.floor(u/20),E=ge(h,5)+be(g,l,p,f)+b+t[g]+d[u]>>>0;b=f,f=p,p=ge(l,30)>>>0,l=h,h=E}n[0]=n[0]+h>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+f>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const{ETH_METHODS:me}=he,_e=e=>{let t="";for(const n in e)({}).hasOwnProperty.call(e,n)&&(t+=`${n}=${e[n]}&`);return t},Oe=(e,t)=>{if(e)throw new Error(t)},we=e=>Oe(!0,e),Te=()=>{};Te.string=e=>"string"==typeof e,Te.bool=e=>"boolean"==typeof e,Te.emptyString=e=>Te.string(e)&&0===e.length,Te.emptyObject=e=>0===Object.keys(e).length,Te.inObject=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Te.undefined=e=>void 0===e,Te.null=e=>null===e,Te.notHash=e=>Te.undefined(e)||Te.emptyString(e),Te.notUndefined=e=>!Te.undefined(e),Te.nonEmptyObject=e=>!Te.emptyObject(e),Te.nonEmptyString=e=>!Te.emptyString(e),Te.notInObject=(e,t)=>!Te.inObject(e,t);const Ne=e=>Object.getOwnPropertyNames(e).filter(t=>"function"==typeof e[t]&&"constructor"!==t);var Se={buildFilterUrl:_e,is:Te,throwIf:Oe,get:(e,{endpoint:t="",subendpoint:n="",hash:r="",pathParam:s="",filterOptions:o={}})=>{const i=Te.nonEmptyObject(o)?"?"+_e(o):"";return r=r?"/"+r:"",s=s?"/"+s:"",n=n?"/"+n:"",e.rawQuery(`${t}${r||s}${n}${i}`)},rejectPromiseIf:(e,t)=>{if(e)return Promise.reject(new Error(t))},uuid:e=>Ee(JSON.stringify(e),"ccfeca02-f0e9-4433-a740-b830cceb3d2d"),ethFactory:function(e){const t={};for(const n in me)({}).hasOwnProperty.call(me,n)&&(t[n]=e[me[n]][n].bind(e[me[n]]));return t},methodFactory:(e,t)=>(Object.keys(t).forEach(n=>{Ne(Object.getPrototypeOf(e.web3data[n])).forEach(r=>{t[n].includes(r)&&(e[n]=e[n]?e[n]:{},e[n][r]=e.web3data[n][r].bind(e))})}),e),throwNow:we,onFulfilled:function(e){return Oe(e.error,e.message),this&&this.formatter?this.formatter(e.payload):e.payload},onError:({response:{data:e}})=>we(e.message||e.description),formatJsonRpc:e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",getMethods:Ne,recordsFormatter:e=>((e,t)=>e&&e[t]?e[t]:e)(e,"records")};const{ERROR_MESSAGE_ADDRESS_NO_ADDRESS:Re,ADDRESSES_ENDPOINT:Ae}=he,{is:ye,get:ve,throwIf:ke,onFulfilled:Ie,onError:Ce,recordsFormatter:De}=Se;var He=class{constructor(e){this.web3data=e}getAllAddresses(e={}){return this.getAll(e)}getAll(e={}){return ve(this.web3data,{endpoint:Ae,filterOptions:e}).then(Ie.bind({formatter:De}),Ce)}getInformation(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"information",filterOptions:t}).then(Ie,Ce)}getMetadata(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"metadata",filterOptions:t}).then(Ie,Ce)}getAdoption(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"adoption",filterOptions:t}).then(Ie,Ce)}getInternalMessages(e,t={}){return this.web3data.address.getFunctions(e,t)}getFunctions(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"functions",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getLogs(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"logs",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getTransactions(e,t={}){return ke(!e,Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"transactions",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getPendingTransactions(e,t={}){return ke(!e,Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"pending-transactions",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getBalance(e,t={}){ke(ye.notHash(e),Re);let n="information";return Array.isArray(e)?(n="balances",t.addresses=e):t.includeTokens?n="balances":(t.startDate||t.endDate)&&(n="account-balances/historical"),ve(this.web3data,{...t.addresses?{}:{hash:e},endpoint:Ae,subendpoint:n,filterOptions:t}).then(Ie,Ce)}getTokens(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"tokens",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getTokenTransfers(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"token-transfers",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getTokenBalances(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"token-balances",filterOptions:t}).then(Ie.bind({formatter:De}),Ce)}getUsage(e,t={}){return ke(ye.notHash(e),Re),ve(this.web3data,{hash:e,endpoint:Ae,subendpoint:"usage",filterOptions:t}).then(Ie,Ce)}getMetrics(){return ve(this.web3data,{endpoint:Ae,subendpoint:"metrics/latest"}).then(Ie,Ce)}};const{is:Be,get:Me,onFulfilled:Pe,onError:Le,throwIf:xe,recordsFormatter:Ue}=Se,{ERROR_MESSAGE_TOKEN_NO_ADDRESS:Ke,ERROR_MESSAGE_TOKEN_NO_HOLDER_ADDRESS:Fe,TOKENS_ENDPOINT:je}=he;var Ge=class{constructor(e){this.web3data=e}getRankings(e={}){return Me(this.web3data,{endpoint:je,subendpoint:"rankings",filterOptions:e}).then(Pe,Le)}getVolume(e,t={}){return xe(Be.notHash(e),Ke),Me(this.web3data,{hash:e,endpoint:je,subendpoint:"volume",filterOptions:t}).then(Pe,Le)}getVelocity(e,t={}){return xe(Be.notHash(e),Ke),Me(this.web3data,{hash:e,endpoint:je,subendpoint:"velocity",filterOptions:t}).then(Pe,Le)}getHolders(e,t={}){xe(Be.notHash(e),Ke);let n="holders/latest",r={formatter:Ue};return t.holderAddresses&&(n="holders/historical",r={}),Me(this.web3data,{hash:e,endpoint:je,subendpoint:n,filterOptions:t}).then(Pe.bind(r),Le)}getHoldersHistorical(e,t){return xe(Be.notInObject(t,"holderAddresses"),Fe),this.getHolders(e,t)}getSupplies(e,t={}){xe(Be.notHash(e),Ke);const n=t.startDate||t.endDate?"supplies/historical":"supplies/latest";return Me(this.web3data,{hash:e,endpoint:je,subendpoint:n,filterOptions:t}).then(Pe,Le)}getTransfers(e,t={}){return xe(Be.notHash(e),Ke),Me(this.web3data,{hash:e,endpoint:je,subendpoint:"transfers",filterOptions:t}).then(Pe.bind({formatter:Ue}),Le)}};const{ERROR_MESSAGE_CONTRACT_NO_ADDRESS:$e,CONTRACTS_ENDPOINT:qe}=he,{is:We,get:ze,throwIf:Ve,onFulfilled:Je,onError:Xe}=Se;var Ye=class{constructor(e){this.web3data=e}getDetails(e){return Ve(We.notHash(e),$e),ze(this.web3data,{pathParam:e,endpoint:qe}).then(Je,Xe)}getFunctions(e){return We.notHash(e)?Promise.reject(new Error($e)):ze(this.web3data,{pathParam:e,endpoint:qe,subendpoint:"functions"}).then(Je,Xe)}getAbi(e){return Ve(We.notHash(e),$e),this.getDetails(e).then(({abi:e})=>e)}getSourceCode(e){return Ve(We.notHash(e),$e),ze(this.web3data,{pathParam:e,endpoint:qe,subendpoint:"source-code"}).then(Je,Xe)}getCode(e){return this.getDetails(e).then(e=>e.bytecode||"0x")}};const{TRANSACTIONS_ENDPOINT:Ze,ERROR_MESSAGE_TRANSACTION_NO_HASH:Qe}=he,{is:et,get:tt,onFulfilled:nt,onError:rt,throwIf:st,recordsFormatter:ot}=Se;var it=class{constructor(e){this.web3data=e}getTransactions(e={}){return tt(this.web3data,{endpoint:Ze,filterOptions:e}).then(nt.bind({formatter:ot}),rt)}getAll(e){return this.getTransactions(e)}getTransaction(e,t={}){return st(et.notHash(e),Qe),tt(this.web3data,{pathParam:e,endpoint:Ze,filterOptions:t}).then(nt,rt)}getPendingTransactions(){return this.getTransactions({status:"pending"}).then(e=>(st(et.undefined(e)||et.null(e),"Failed to retrieve pending transactions."),e),console.error)}getGasPrediction(){return tt(this.web3data,{endpoint:Ze,subendpoint:"gas/predictions"}).then(nt,rt)}getGasPercentiles(e={}){return tt(this.web3data,{endpoint:Ze,subendpoint:"gas/percentiles",filterOptions:e}).then(nt,rt)}getGasPrice(){return this.getGasPrediction().then(e=>(st(!e.average||!e.average.gasPrice,"Failed to retrieve gas price."),`${e.average.gasPrice}`))}getVolume(e={}){return tt(this.web3data,{endpoint:Ze,subendpoint:"volume",filterOptions:e}).then(nt,rt)}getMetrics(e){const t=e&&(e.startDate||e.endDate)?"historical":"latest";return tt(this.web3data,{endpoint:`${Ze}/metrics`,subendpoint:t,filterOptions:e}).then(nt.bind({formatter:ot}),rt)}};const{BLOCKS_ENDPOINT:at,ERROR_MESSAGE_BLOCK_NO_ID:ct}=he,{is:dt,get:ut,throwIf:ht,onFulfilled:lt,onError:pt,recordsFormatter:ft}=Se;var bt=class{constructor(e){this.web3data=e}getBlocks(e){return ut(this.web3data,{endpoint:at,filterOptions:e}).then(lt.bind({formatter:ft}),pt)}getBlock(e,t){return ht(dt.undefined(e),ct),ut(this.web3data,{pathParam:e,endpoint:at,filterOptions:t}).then(lt,pt)}getBlockNumber(){return this.web3data.block.getBlock("latest").then(e=>(ht(e|!e.number,"Failed to retrieve block number."),Number.parseInt(e.number,10)))}getBlockTransactionCount(e){return this.web3data.block.getBlock(e).then(e=>(ht(!e||!e.predictions&&!e.numTransactions,"Failed to retrieve block transaction count."),e.predictions?null:Number.parseInt(e.numTransactions,10)))}getTransactions(e,t){return ht(dt.undefined(e),ct),ut(this.web3data,{pathParam:e,endpoint:at,subendpoint:"transactions",filterOptions:t}).then(lt.bind({formatter:ft}),pt)}getTransactionFromBlock(e,t){return ht(dt.undefined(e),ct),this.web3data.block.getTransactions(e).then(e=>(ht(!e,"Failed to retrieve transaction."),t<e.length&&t>-1?e[t]:null))}getUncle(e,t){return ht(dt.undefined(e),ct),ht(dt.undefined(t),"Missing required param 'index'"),this.web3data.block.getBlock(e,{validationMethod:"full"}).then(e=>(ht(!e||!e.predictions&&!e.numTransactions&&!e.validation,"Failed to retrieve uncle."),!e.predictions&&e.validation.uncles&&t<e.validation.uncles.length&&t>-1?e.validation.uncles[t]:null))}getTokenTransfers(e,t){return ht(dt.undefined(e),ct),ut(this.web3data,{pathParam:e,endpoint:at,subendpoint:"token-transfers",filterOptions:t}).then(lt,pt)}getLogs(e,t){return ht(dt.undefined(e),ct),ut(this.web3data,{pathParam:e,endpoint:at,subendpoint:"logs",filterOptions:t}).then(lt.bind({formatter:ft}),pt)}getFunctions(e,t){return ht(dt.undefined(e),ct),ut(this.web3data,{pathParam:e,endpoint:at,subendpoint:"functions",filterOptions:t}).then(lt.bind({formatter:ft}),pt)}getMetrics(e){const t=e&&(e.startDate||e.endDate)?"historical":"latest";return ut(this.web3data,{endpoint:`${at}/metrics`,subendpoint:t,filterOptions:e}).then(lt.bind({formatter:ft}),pt)}};const{BLOCKCHAINS_ENDPOINT:gt}=he,{get:Et,onFulfilled:mt,onError:_t}=Se;var Ot=class{constructor(e){this.web3data=e}getMetrics(e){const t=e&&(e.startDate||e.endDate)?"historical":"latest";return Et(this.web3data,{endpoint:`${gt}/metrics`,subendpoint:t,filterOptions:e}).then(mt,_t)}};const{get:wt,is:Tt,throwIf:Nt,onError:St,onFulfilled:Rt}=Se,{SIGNATURES_ENDPOINT:At,ERROR_MESSAGE_SIGNATURE_NO_HASH:yt}=he;var vt=class{constructor(e){this.web3data=e}getSignature(e){return Nt(Tt.notHash(e),yt),wt(this.web3data,{hash:e,endpoint:At}).then(Rt,St)}};const{is:kt,get:It,throwIf:Ct,onFulfilled:Dt,onError:Ht}=Se,{MARKET_FEATURES:Bt,MARKET_ENDPOINT:Mt,ERROR_MESSAGE_MARKET_NO_PAIR:Pt,ERROR_MESSAGE_MARKET_NO_FEATURE:Lt}=he;var xt=class{constructor(e){this.web3data=e}async getEtherPrice(){return It(this.web3data,{endpoint:Mt+"/spot/prices/pairs/eth_usd/latest"}).then(e=>e.payload.price,Ht)}getRankings(e){return It(this.web3data,{endpoint:Mt,subendpoint:"rankings",filterOptions:e}).then(Dt,Ht)}getFeatures(e=Bt,t={}){return e=(e=Array.isArray(e)?e:[e]).map(e=>{switch(Ct(kt.undefined(e)||!Bt.includes(e),Lt),e){case"prices":e+="/pairs";break;case"ohlcv":case"tickers":case"trades":e+="/information"}return It(this.web3data,{endpoint:Mt,subendpoint:e,filterOptions:t}).then(Dt,Ht).then(t=>({[e.split("/")[0]]:t}))}),Promise.all([...e]).then(e=>e.reduce((e,t)=>({...e,...t})))}getOhlcv(e,t={}){Ct(kt.undefined(e),Pt);const n=t.startDate||t.endDate?"historical":"latest";return It(this.web3data,{pathParam:e,endpoint:`${Mt}/ohlcv`,subendpoint:n,filterOptions:t}).then(Dt,Ht)}getOrders(e,t,n={}){return Ct(kt.undefined(e),Pt),(t=Array.isArray(t)?t:[t]).forEach(e=>Ct(kt.undefined(e),"No exchange specified")),n.exchange=t,It(this.web3data,{pathParam:e,endpoint:`${Mt}/orders`,filterOptions:n}).then(Dt,Ht)}getOrderBooks(e,t={}){return Ct(kt.undefined(e),Pt),It(this.web3data,{pathParam:e,endpoint:`${Mt}/orders`,subendpoint:"update",filterOptions:t}).then(Dt,Ht)}getBbos(e,t={}){Ct(kt.undefined(e),Pt);const n=t.startDate||t.endDate?"bbo/historical":"bbo";return It(this.web3data,{pathParam:e,endpoint:`${Mt}/orders`,subendpoint:n,filterOptions:t}).then(Dt,Ht)}getPrices(e,t={}){Ct(kt.undefined(e),Pt);const n=t.startDate||t.endDate?"historical":"latest";return It(this.web3data,{pathParam:e,endpoint:`${Mt}/spot/prices/pairs`,subendpoint:n,filterOptions:t}).then(Dt,Ht)}getTokenPrices(e,t={}){Ct(kt.notHash(e),Pt);const n=t.startDate||t.endDate?"historical":"latest";return It(this.web3data,{hash:e,endpoint:`${Mt}/tokens/prices`,subendpoint:n,filterOptions:t}).then(Dt,Ht)}getVwap(e,t={}){return Ct(kt.undefined(e),Pt),It(this.web3data,{pathParam:e,endpoint:`${Mt}/prices`,subendpoint:"wap/latest",filterOptions:t}).then(Dt,Ht)}getTickers(e,t={}){Ct(kt.undefined(e),Pt);const n=t.startDate||t.endDate?"historical":"latest";return It(this.web3data,{pathParam:e,endpoint:`${Mt}/tickers`,subendpoint:n,filterOptions:t}).then(Dt,Ht)}getTrades(e,t={}){return Ct(kt.undefined(e),Pt),It(this.web3data,{pathParam:e,endpoint:`${Mt}/trades`,subendpoint:"historical",filterOptions:t}).then(Dt,Ht)}getAssetAddresses(e="all"){return It(this.web3data,{endpoint:`${Mt}/pairs/addresses`,filterOptions:{symbols:e}}).then(Dt,Ht)}};const{ethFactory:Ut}=Se,{BLOCKCHAIN_ID_ETHEREUM_MAINNET:Kt}=he;var Ft=class{constructor(e,t,n){n.blockchainId=Kt,this.web3data=new e(t,n);const r=Ut(this.web3data);for(const e in r)({}).hasOwnProperty.call(r,e)&&(this[e]=r[e])}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN:jt,BTC_METHODS:Gt}=he,{methodFactory:$t}=Se;var qt=class{constructor(e,t,n){n.blockchainId=jt,this.web3data=new e(t,n),$t(this,Gt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_CASH:Wt,BTC_METHODS:zt}=he,{methodFactory:Vt}=Se;var Jt=class{constructor(e,t,n){n.blockchainId=Wt,this.web3data=new e(t,n),Vt(this,zt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_BITCOIN_SV:Xt,BTC_METHODS:Yt}=he,{methodFactory:Zt}=Se;var Qt=class{constructor(e,t,n){n.blockchainId=Xt,this.web3data=new e(t,n),Zt(this,Yt)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_LITECOIN:en,LTC_METHODS:tn}=he,{methodFactory:nn}=Se;var rn=class{constructor(e,t,n){n.blockchainId=en,this.web3data=new e(t,n),nn(this,tn)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_STELLAR:sn,BTC_METHODS:on}=he,{methodFactory:an}=Se;var cn=class{constructor(e,t,n){n.blockchainId=sn,this.web3data=new e(t,n),an(this,on)}rpc(e,t){return this.web3data.rpc(e,t)}};const{BLOCKCHAIN_ID_ZCASH:dn,BTC_METHODS:un}=he,{methodFactory:hn}=Se;var ln=class{constructor(e,t,n){n.blockchainId=dn,this.web3data=new e(t,n),hn(this,un)}rpc(e,t){return this.web3data.rpc(e,t)}},pn=null;"undefined"!=typeof WebSocket?pn=WebSocket:"undefined"!=typeof MozWebSocket?pn=MozWebSocket:void 0!==ue?pn=ue.WebSocket||ue.MozWebSocket:"undefined"!=typeof window?pn=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(pn=self.WebSocket||self.MozWebSocket);var fn=pn;const{DEFAULT_WEBSOCKET_URL:bn}=he,{is:gn,uuid:En}=Se,mn=e=>e?(e.params&&(e.params=Array.isArray(e.params)?e.params:[e.params]),JSON.stringify({jsonrpc:e.version||"2.0",method:e.method||"subscribe",id:e.id||0,params:e.params||[]})):"",_n=0,On=1,wn=2;var Tn=class{constructor(e,t){this.socket=null,this.baseWsUrl=t&&t.websocketUrl?t.websocketUrl:bn,this.apiKey=e,this.blockchainId=null,this.connected=!1,this.reconnects=0,this.responseReceived=!1,this.dataReceived=!1,t.blockchainId&&(this.blockchainId=t.blockchainId),this.registry={},this.registrySubIds={},this.latestState={}}connect(e){if(this.socket&&1===this.socket.readyState)return;const t=this.apiKey?`?x-api-key=${this.apiKey}`:"",n=this.blockchainId?`&x-amberdata-blockchain-id=${this.blockchainId}`:"";this.socket=new fn(`${this.baseWsUrl}${t}${n}`),this.socket.addEventListener("open",t=>{console.info("websocket client connection opened"),this.connected=!0,this._refreshSubscriptions(),this._listen(),e&&e(t),setTimeout(()=>{!this.responseReceived&&gn.nonEmptyObject(this.registry)&&this.socket&&this.socket.close()},5e3),setTimeout(()=>{!this.dataReceived&&gn.nonEmptyObject(this.registry)&&this.socket.close()},18e5)}),this.socket.addEventListener("error",t=>{e&&t?e("connection error occurred",t):console.error("connection error occurred"),this._reconnect()}),this.socket.addEventListener("close",e=>{console.info("Websocket client connection closed - code",e.code),this._reconnect()})}disconnect(e=null){this.socket&&1===this.socket.readyState?(this.socket.onclose=e?()=>e("Websocket client connection closed"):()=>console.info("Websocket client connection closed"),this.socket.close(),this.socket=null):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=En({eventName:e,filters:t});this.connected&&this._subscribe(e,t),this.registry[r]={},this.registry[r].callback=n,this.registry[r].args={eventName:e,filters:t}}once({eventName:e,filters:t},n){this.on({eventName:e,filters:t},r=>{this.off({eventName:e,filters:t},()=>{}),n&&n(r),this.registry[En({eventName:e,filters:t})].callback=null})}off({eventName:e,filters:t},n){if(n||console.warn("no callback provided"),!e)return void console.error("no event specified");const r=En({eventName:e,filters:t});this.registry[r]&&this.registry[r].subId?(this.registry[r].isSubscribed=!1,this.registry[r].unsubCallback=n||(()=>{}),this._unsubscribe(e,t,r)):console.error(`Not subscribed to: '${e}'`)}_reconnect(){1===this.socket.readyState&&this.disconnect(),++this.reconnects<=3&&(console.warn(`attempting to reconnect...${this.reconnects}/3`),this.connect())}_refreshSubscriptions(){if(this.registry)for(const{args:{eventName:e,filters:t}}of Object.values(this.registry))this._subscribe(e,t)}_listen(){this.socket.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch(e){return void console.error("error parsing json request -",e)}switch(this.responseReceived=!0,(e=>e.params?On:gn.string(e.result)?_n:gn.bool(e.result)?wn:void 0)(t)){case _n:this._subHandler(t);break;case On:this._dataHandler(t);break;case wn:this._unsubHandler(t)}})}_subHandler(e){const t=e&&e.id?e.id:"";this.registrySubIds[e.result]=t,this.registry[t].subId=e.result,this.registry[t].isSubscribed=!0}_dataHandler(e){this.dataReceived=!0;const t=e&&e.params&&e.params.result?e.params.result:{},n=e&&e.params&&e.params.subscription?e.params.subscription:"",r=this.registrySubIds[n];this.registry[r].isSubscribed&&(this.registry[r]&&this.registry[r].callback&&this.registry[r].callback(t),gn.notUndefined(this.latestState[r])&&(this.latestState[r]=t))}_unsubHandler(e){const t=e&&e.id?e.id:"",{eventName:n}=this.registry[t].args;e.result?(this.registry[t].unsubCallback(`successfully unsubscribed from - ${n}`),delete this.registry[t]):this.registry[t].unsubCallback(`Error: Not unsubscribed from - ${n}`)}_subscribe(e,t){const n=gn.notUndefined(t)?[t]:[],r=En({eventName:e,filters:t}),s=mn({id:r,params:[e,...n]});this.socket.send(s)}_unsubscribe(e,t,n){const r=mn({id:n,method:"unsubscribe",params:[this.registry[n].subId]});this.socket.readyState===this.socket.OPEN&&this.socket.send(r)}};const{API_KEY_HEADER:Nn,BLOCKCHAIN_ID_HEADER:Sn,DEFAULT_BASE_URL:Rn,DEFAULT_RPC_URL:An,ERROR_RPC_NO_METHOD:yn}=he,{is:vn,throwIf:kn,formatJsonRpc:In}=Se;class Cn{constructor(e,t={}){kn(vn.undefined(e)||vn.emptyString(e),"No api key supplied"),this.apiKey=e,this.blockchainId=null,this.headers={},this.headers[Nn]=this.apiKey,t.blockchainId&&(this.blockchainId=t.blockchainId,this.headers[Sn]=t.blockchainId),this.wsConfig={...t,websocketUrl:t.websocketUrl?t.websocketUrl:null},this.baseUrl=t.baseUrl?t.baseUrl:Rn,this.address=new He(this),this.token=new Ge(this),this.contract=new Ye(this),this.transaction=new it(this),this.block=new bt(this),this.blockchain=new Ot(this),this.signature=new vt(this),this.market=new xt(this)}rawQuery(e){return de.get(this.baseUrl+e,{headers:this.headers}).then(e=>e.data)}rpc(e,t=[]){return kn(!e,yn),de.post(`${An}?${Nn}=${this.apiKey}&${Sn}=${this.blockchainId}`,In({method:e,params:t}),{headers:this.headers}).then(e=>e.data,e=>e.response.data)}}var Dn=class extends Cn{constructor(e,t={}){super(e,t),this.eth=new Ft(Cn,e,t),this.btc=new qt(Cn,e,t),this.bch=new Jt(Cn,e,t),this.bsv=new Qt(Cn,e,t),this.ltc=new rn(Cn,e,t),this.xlm=new cn(Cn,e,t),this.zec=new ln(Cn,e,t),this.websocket=null}connect(e){return this.websocket=this.websocket?this.websocket:new Tn(this.apiKey,this.wsConfig),this.websocket.connect(e)}disconnect(e){this.websocket?this.websocket.disconnect(e):console.error("socket is not yet connected")}on({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.on({eventName:e,filters:t},n):console.error("no event specified")}once({eventName:e,filters:t},n){this.websocket.once({eventName:e,filters:t},n)}off({eventName:e,filters:t},n){n||console.warn("no callback provided"),e?this.websocket.off({eventName:e,filters:t},n):console.error("no event specified")}};return"undefined"!=typeof window&&void 0===window.Web3Data&&(window.Web3Data=Dn),Dn}));